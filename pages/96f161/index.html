<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>00_TS基础 | Yumoer</title>
    <meta name="generator" content="VuePress 1.9.7">
    <link rel="icon" href="/docs-vuepress-system/favicon.ico">
    <meta name="description" content="Hello, my friend!">
    
    <link rel="preload" href="/docs-vuepress-system/assets/css/0.styles.af06589c.css" as="style"><link rel="preload" href="/docs-vuepress-system/assets/js/app.4c359707.js" as="script"><link rel="preload" href="/docs-vuepress-system/assets/js/2.f426a6b2.js" as="script"><link rel="preload" href="/docs-vuepress-system/assets/js/103.f12529ea.js" as="script"><link rel="prefetch" href="/docs-vuepress-system/assets/js/10.6d027e34.js"><link rel="prefetch" href="/docs-vuepress-system/assets/js/100.6711bf3d.js"><link rel="prefetch" href="/docs-vuepress-system/assets/js/101.5444de48.js"><link rel="prefetch" href="/docs-vuepress-system/assets/js/102.66d004ba.js"><link rel="prefetch" href="/docs-vuepress-system/assets/js/104.50d4c3a2.js"><link rel="prefetch" href="/docs-vuepress-system/assets/js/11.ee76b127.js"><link rel="prefetch" href="/docs-vuepress-system/assets/js/12.97bef617.js"><link rel="prefetch" href="/docs-vuepress-system/assets/js/13.f5eac981.js"><link rel="prefetch" href="/docs-vuepress-system/assets/js/14.59b8ca1e.js"><link rel="prefetch" href="/docs-vuepress-system/assets/js/15.4ba0b86b.js"><link rel="prefetch" href="/docs-vuepress-system/assets/js/16.989e147c.js"><link rel="prefetch" href="/docs-vuepress-system/assets/js/17.dc9f23ff.js"><link rel="prefetch" href="/docs-vuepress-system/assets/js/18.116716f4.js"><link rel="prefetch" href="/docs-vuepress-system/assets/js/19.f908e99b.js"><link rel="prefetch" href="/docs-vuepress-system/assets/js/20.b2bf308d.js"><link rel="prefetch" href="/docs-vuepress-system/assets/js/21.3a93947a.js"><link rel="prefetch" href="/docs-vuepress-system/assets/js/22.2c9d1a13.js"><link rel="prefetch" href="/docs-vuepress-system/assets/js/23.da6570c2.js"><link rel="prefetch" href="/docs-vuepress-system/assets/js/24.8d453d0a.js"><link rel="prefetch" href="/docs-vuepress-system/assets/js/25.31b06bfc.js"><link rel="prefetch" href="/docs-vuepress-system/assets/js/26.f0431612.js"><link rel="prefetch" href="/docs-vuepress-system/assets/js/27.8ceb61f1.js"><link rel="prefetch" href="/docs-vuepress-system/assets/js/28.866cfa9c.js"><link rel="prefetch" href="/docs-vuepress-system/assets/js/29.9650a8ef.js"><link rel="prefetch" href="/docs-vuepress-system/assets/js/3.ed91ffb4.js"><link rel="prefetch" href="/docs-vuepress-system/assets/js/30.f1746a54.js"><link rel="prefetch" href="/docs-vuepress-system/assets/js/31.9c860345.js"><link rel="prefetch" href="/docs-vuepress-system/assets/js/32.7bed7b32.js"><link rel="prefetch" href="/docs-vuepress-system/assets/js/33.659617bf.js"><link rel="prefetch" href="/docs-vuepress-system/assets/js/34.35095575.js"><link rel="prefetch" href="/docs-vuepress-system/assets/js/35.d4fc4f32.js"><link rel="prefetch" href="/docs-vuepress-system/assets/js/36.baa6eb02.js"><link rel="prefetch" href="/docs-vuepress-system/assets/js/37.39310532.js"><link rel="prefetch" href="/docs-vuepress-system/assets/js/38.66a03833.js"><link rel="prefetch" href="/docs-vuepress-system/assets/js/39.9855516f.js"><link rel="prefetch" href="/docs-vuepress-system/assets/js/4.7e5cde4c.js"><link rel="prefetch" href="/docs-vuepress-system/assets/js/40.a01cc710.js"><link rel="prefetch" href="/docs-vuepress-system/assets/js/41.68136b7a.js"><link rel="prefetch" href="/docs-vuepress-system/assets/js/42.aa12c5ea.js"><link rel="prefetch" href="/docs-vuepress-system/assets/js/43.6db2f5fc.js"><link rel="prefetch" href="/docs-vuepress-system/assets/js/44.82250255.js"><link rel="prefetch" href="/docs-vuepress-system/assets/js/45.d13d6e62.js"><link rel="prefetch" href="/docs-vuepress-system/assets/js/46.30a867f7.js"><link rel="prefetch" href="/docs-vuepress-system/assets/js/47.c46c4532.js"><link rel="prefetch" href="/docs-vuepress-system/assets/js/48.9b542168.js"><link rel="prefetch" href="/docs-vuepress-system/assets/js/49.81ca7482.js"><link rel="prefetch" href="/docs-vuepress-system/assets/js/5.4a0db07f.js"><link rel="prefetch" href="/docs-vuepress-system/assets/js/50.7ef0412d.js"><link rel="prefetch" href="/docs-vuepress-system/assets/js/51.17fb6a48.js"><link rel="prefetch" href="/docs-vuepress-system/assets/js/52.a5e80252.js"><link rel="prefetch" href="/docs-vuepress-system/assets/js/53.5d02f2c4.js"><link rel="prefetch" href="/docs-vuepress-system/assets/js/54.6d1d13cc.js"><link rel="prefetch" href="/docs-vuepress-system/assets/js/55.9c3f3920.js"><link rel="prefetch" href="/docs-vuepress-system/assets/js/56.c514740f.js"><link rel="prefetch" href="/docs-vuepress-system/assets/js/57.a7349f15.js"><link rel="prefetch" href="/docs-vuepress-system/assets/js/58.8d4b4be3.js"><link rel="prefetch" href="/docs-vuepress-system/assets/js/59.9a92218d.js"><link rel="prefetch" href="/docs-vuepress-system/assets/js/6.db7cd489.js"><link rel="prefetch" href="/docs-vuepress-system/assets/js/60.e2950da8.js"><link rel="prefetch" href="/docs-vuepress-system/assets/js/61.303e42cd.js"><link rel="prefetch" href="/docs-vuepress-system/assets/js/62.8e3a033e.js"><link rel="prefetch" href="/docs-vuepress-system/assets/js/63.7b5ba991.js"><link rel="prefetch" href="/docs-vuepress-system/assets/js/64.ace1fb74.js"><link rel="prefetch" href="/docs-vuepress-system/assets/js/65.6db58b73.js"><link rel="prefetch" href="/docs-vuepress-system/assets/js/66.80423e49.js"><link rel="prefetch" href="/docs-vuepress-system/assets/js/67.fdbcd7c8.js"><link rel="prefetch" href="/docs-vuepress-system/assets/js/68.5e38c471.js"><link rel="prefetch" href="/docs-vuepress-system/assets/js/69.ddc6f4c2.js"><link rel="prefetch" href="/docs-vuepress-system/assets/js/7.d652f184.js"><link rel="prefetch" href="/docs-vuepress-system/assets/js/70.798cf583.js"><link rel="prefetch" href="/docs-vuepress-system/assets/js/71.bb32856d.js"><link rel="prefetch" href="/docs-vuepress-system/assets/js/72.25e6f8ac.js"><link rel="prefetch" href="/docs-vuepress-system/assets/js/73.b1874bee.js"><link rel="prefetch" href="/docs-vuepress-system/assets/js/74.2a774e15.js"><link rel="prefetch" href="/docs-vuepress-system/assets/js/75.16ea4dd0.js"><link rel="prefetch" href="/docs-vuepress-system/assets/js/76.58f390f1.js"><link rel="prefetch" href="/docs-vuepress-system/assets/js/77.a08a5e2b.js"><link rel="prefetch" href="/docs-vuepress-system/assets/js/78.366f827e.js"><link rel="prefetch" href="/docs-vuepress-system/assets/js/79.8c656b1c.js"><link rel="prefetch" href="/docs-vuepress-system/assets/js/8.8d2e0f14.js"><link rel="prefetch" href="/docs-vuepress-system/assets/js/80.c420e2f6.js"><link rel="prefetch" href="/docs-vuepress-system/assets/js/81.665f0e3f.js"><link rel="prefetch" href="/docs-vuepress-system/assets/js/82.3529cda7.js"><link rel="prefetch" href="/docs-vuepress-system/assets/js/83.76603c31.js"><link rel="prefetch" href="/docs-vuepress-system/assets/js/84.0a2abb27.js"><link rel="prefetch" href="/docs-vuepress-system/assets/js/85.c9760706.js"><link rel="prefetch" href="/docs-vuepress-system/assets/js/86.ae8bdb9a.js"><link rel="prefetch" href="/docs-vuepress-system/assets/js/87.6a6da94e.js"><link rel="prefetch" href="/docs-vuepress-system/assets/js/88.3d06e0c0.js"><link rel="prefetch" href="/docs-vuepress-system/assets/js/89.3bca29ed.js"><link rel="prefetch" href="/docs-vuepress-system/assets/js/9.2513f4da.js"><link rel="prefetch" href="/docs-vuepress-system/assets/js/90.ba698837.js"><link rel="prefetch" href="/docs-vuepress-system/assets/js/91.d470e336.js"><link rel="prefetch" href="/docs-vuepress-system/assets/js/92.9794ab9a.js"><link rel="prefetch" href="/docs-vuepress-system/assets/js/93.628eba54.js"><link rel="prefetch" href="/docs-vuepress-system/assets/js/94.22240d7b.js"><link rel="prefetch" href="/docs-vuepress-system/assets/js/95.64d52497.js"><link rel="prefetch" href="/docs-vuepress-system/assets/js/96.32705d95.js"><link rel="prefetch" href="/docs-vuepress-system/assets/js/97.cb1d280f.js"><link rel="prefetch" href="/docs-vuepress-system/assets/js/98.1aee29dd.js"><link rel="prefetch" href="/docs-vuepress-system/assets/js/99.8ca69c65.js">
    <link rel="stylesheet" href="/docs-vuepress-system/assets/css/0.styles.af06589c.css">
  </head>
  <body class="theme-mode-light">
    <div id="app" data-server-rendered="true"><div class="theme-container sidebar-open have-rightmenu"><header class="navbar blur"><div title="目录" class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/docs-vuepress-system/" class="home-link router-link-active"><!----> <span class="site-name">Yumoer</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/docs-vuepress-system/" class="nav-link">首页</a></div><div class="nav-item"><a href="/docs-vuepress-system/guide/" class="nav-link">文档</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="语言" class="dropdown-title"><!----> <span class="title" style="display:;">语言</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/docs-vuepress-system/language/chinese.html" class="nav-link">中文简体</a></li><li class="dropdown-item"><!----> <a href="/docs-vuepress-system/language/english.html" class="nav-link">English</a></li></ul></div></div><div class="nav-item"><a href="http://yumoer.github.io" target="_blank" rel="noopener noreferrer" class="nav-link external">
    External
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar-hover-trigger"></div> <aside class="sidebar" style="display:none;"><!----> <nav class="nav-links"><div class="nav-item"><a href="/docs-vuepress-system/" class="nav-link">首页</a></div><div class="nav-item"><a href="/docs-vuepress-system/guide/" class="nav-link">文档</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="语言" class="dropdown-title"><!----> <span class="title" style="display:;">语言</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/docs-vuepress-system/language/chinese.html" class="nav-link">中文简体</a></li><li class="dropdown-item"><!----> <a href="/docs-vuepress-system/language/english.html" class="nav-link">English</a></li></ul></div></div><div class="nav-item"><a href="http://yumoer.github.io" target="_blank" rel="noopener noreferrer" class="nav-link external">
    External
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/docs-vuepress-system/guide/" class="sidebar-link">文档介绍</a></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Html</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading open"><span>基础</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/docs-vuepress-system/pages/54d379/" class="sidebar-link">00_HTML 介绍</a></li><li><a href="/docs-vuepress-system/pages/12d50f/" class="sidebar-link">01_第一个 HTML 页面</a></li><li><a href="/docs-vuepress-system/pages/44d56c/" class="sidebar-link">02_HTML 基本元素</a></li><li><a href="/docs-vuepress-system/pages/802583/" class="sidebar-link">03_HTML 列表</a></li><li><a href="/docs-vuepress-system/pages/d303b6/" class="sidebar-link">04_链接元素</a></li><li><a href="/docs-vuepress-system/pages/3e59dc/" class="sidebar-link">05_图片元素</a></li><li><a href="/docs-vuepress-system/pages/5ea2bb/" class="sidebar-link">06_HTML 表格</a></li><li><a href="/docs-vuepress-system/pages/7bc18f/" class="sidebar-link">07_HTML 表单</a></li></ul></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>进阶</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>新特性</span> <span class="arrow right"></span></p> <!----></section></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Css</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading open"><span>基础</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/docs-vuepress-system/pages/1d4a92/" class="sidebar-link">00_CSS 介绍</a></li><li><a href="/docs-vuepress-system/pages/337e3c/" class="sidebar-link">01_如何使用 CSS</a></li><li><a href="/docs-vuepress-system/pages/1e6b40/" class="sidebar-link">02_CSS 语法</a></li><li><a href="/docs-vuepress-system/pages/4b749a/" class="sidebar-link">03_块级元素与内联元素</a></li><li><a href="/docs-vuepress-system/pages/a9e206/" class="sidebar-link">04_CSS 选择器</a></li><li><a href="/docs-vuepress-system/pages/5761df/" class="sidebar-link">05_CSS 伪类</a></li><li><a href="/docs-vuepress-system/pages/86aa3b/" class="sidebar-link">06_盒子模型</a></li><li><a href="/docs-vuepress-system/pages/4b33bb/" class="sidebar-link">07_显示与隐藏</a></li><li><a href="/docs-vuepress-system/pages/8a96c0/" class="sidebar-link">08_overflow 属性</a></li><li><a href="/docs-vuepress-system/pages/05d08a/" class="sidebar-link">09_浮动</a></li><li><a href="/docs-vuepress-system/pages/67e79c/" class="sidebar-link">10_定位</a></li></ul></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>进阶</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>Bootstrap</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>包管理器</span> <span class="arrow right"></span></p> <!----></section></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>JavaScript</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading open"><span>ES5</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/docs-vuepress-system/pages/b5c29d/" class="sidebar-link">00_JavaScript 介绍</a></li><li><a href="/docs-vuepress-system/pages/791153/" class="sidebar-link">01_基础语法</a></li><li><a href="/docs-vuepress-system/pages/dc45a9/" class="sidebar-link">02_变量与常量</a></li><li><a href="/docs-vuepress-system/pages/aac90b/" class="sidebar-link">03_数据类型</a></li><li><a href="/docs-vuepress-system/pages/f58bdd/" class="sidebar-link">04_运算符</a></li><li><a href="/docs-vuepress-system/pages/fee5ba/" class="sidebar-link">05_语句</a></li><li><a href="/docs-vuepress-system/pages/5f5b00/" class="sidebar-link">06_函数</a></li><li><a href="/docs-vuepress-system/pages/823f36/" class="sidebar-link">07_作用域</a></li><li><a href="/docs-vuepress-system/pages/59580a/" class="sidebar-link">08_特殊函数</a></li><li><a href="/docs-vuepress-system/pages/86b044/" class="sidebar-link">09_闭包</a></li><li><a href="/docs-vuepress-system/pages/6c0c9a/" class="sidebar-link">10_对象</a></li><li><a href="/docs-vuepress-system/pages/c9a929/" class="sidebar-link">11_JSON</a></li><li><a href="/docs-vuepress-system/pages/cc3f5c/" class="sidebar-link">12_Function 对象</a></li><li><a href="/docs-vuepress-system/pages/48c6c4/" class="sidebar-link">13_原型</a></li><li><a href="/docs-vuepress-system/pages/af7804/" class="sidebar-link">14_继承</a></li><li><a href="/docs-vuepress-system/pages/c48744/" class="sidebar-link">15_引用类型</a></li><li><a href="/docs-vuepress-system/pages/07bb4a/" class="sidebar-link">16_数组</a></li><li><a href="/docs-vuepress-system/pages/0cbe31/" class="sidebar-link">17_正则表达式</a></li><li><a href="/docs-vuepress-system/pages/0e31d6/" class="sidebar-link">18_字符串</a></li></ul></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>进阶</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>jQuery</span> <span class="arrow right"></span></p> <!----></section></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>TypeScript</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading open"><span>基础</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/docs-vuepress-system/pages/96f161/" aria-current="page" class="active sidebar-link">00_TS基础</a><ul class="sidebar-sub-headers"></ul></li></ul></section></li></ul></section></li></ul> </aside> <div><main class="page"><div class="theme-vdoing-wrapper "><div class="articleInfo-wrap" data-v-082cf275><div class="articleInfo" data-v-082cf275><ul class="breadcrumbs" data-v-082cf275><li data-v-082cf275><a href="/docs-vuepress-system/" title="首页" class="iconfont icon-home router-link-active" data-v-082cf275></a></li> <li data-v-082cf275><a href="/docs-vuepress-system/categories/?category=Typescript" title="分类" data-v-082cf275>Typescript</a></li><li data-v-082cf275><a href="/docs-vuepress-system/categories/?category=%E5%9F%BA%E7%A1%80" title="分类" data-v-082cf275>基础</a></li></ul> <div class="info" data-v-082cf275><!----> <div title="创建时间" class="date iconfont icon-riqi" data-v-082cf275><a href="javascript:;" data-v-082cf275>2022-01-14</a></div> <!----></div></div></div> <!----> <div class="content-wrapper"><div class="right-menu-wrapper"><div class="right-menu-margin"><div class="right-menu-title">目录</div> <div class="right-menu-content"></div></div></div> <h1><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAAAXNSR0IArs4c6QAABGpJREFUSA3tVVtoXFUU3fvOI53UlmCaKIFmwEhsE7QK0ipFEdHEKpXaZGrp15SINsXUWvBDpBgQRKi0+KKoFeJHfZA+ED9KKoIU2gYD9UejTW4rVIzm0VSTziPzuNu1z507dibTTjL4U/DAzLn3nL3X2o91ziX6f9wMFdh6Jvbm9nNSV0msViVO6tN1Rm7NMu2OpeJ9lWBUTDxrJbYTS0hInuwciu9eLHlFxCLCZEk3MegsJmZ5K/JD6t7FkFdEvGUo1g7qJoG3MHImqRIn8/nzY1K9UPKKiJmtnUqHVE3Gbuay6vJE/N2FEmuxFjW2nUuE0yQXRRxLiTUAzs36zhZvOXJPdX850EVnnLZkB8prodQoM5JGj7Xk2mvC7JB8tG04Ef5PiXtG0UtxupRQSfTnBoCy554x18yJHI6I+G5Eru4LHmPJZEQsrvPUbMiA8G/WgMK7w7I+ez7++o2ANfbrjvaOl1tFMs+htG3IrZH9/hDX1Pr8Tc0UvH8tcX29KzAgIGcEkINyW5BF9x891hw6VYqgJHEk0huccS7vh3C6gTiODL+26huuBtbct8eZnqLML8PkxGYpuPZBqtqwkSjgc4mB5gbgig5i+y0UDK35LMxXisn9xQtK+nd26gTIHsHe/oblK/b29fUmN/8Y+9jAQrnBp56m1LcDlDp9irKTExSKduXJVWSqdBMA08pEJnEIOB3FPPMybu/oeV8zFeYN3xx576Q6RH+VmplE4ncQV5v+5rzSoyOU7PuEAg8g803PwBJ0CExno/jcMbN8tONYeOmHiuUNryvm3fRUy4tMPVLdAGkUhNWuggGrJcXPv+ouCjz0MKUHz1J2/E8IC9nqTabcxgaBYM0hPhD5Y65FsbxRQKxCQrDjDctW7PUM3HuZunFyifSAqEfuzCp48Il24luWUWZoyJCaPR82jE0+kFA643wRFVni4RYSq3ohJO2pZ7B5dO4xkDWbEpossJPLSrPjYID8rS2UHTlvyNxqIGsg674XJJ7vnh5L7PNwC4hh2sjCI96mzszOTpxLF0T7l88Yz7lAuK6OnL8gXLOnTvpzSb22YG8W7us3jSebFHeeqnXRG1vt+MoUM84LQIBmMsCTAcOauTh0T0l0neQK7m2bLMt2mGxU3HYssS0J2cdv5wljlPsrIuZLAG/2DOZIXgCYT8uMGZN+e2kSirfxZOPCsC0f24nTZzspnVn9VePS1Z5vubmAGGXG8ZFno9Hel0yfA5ZPhF7Dh972BQJ2qCpgH67lmWtBYbvk6sz02wjky2vXyz0XErP/kFB619js1BtwfOV4OPRqOQBjy3Qbk18vigUPPSD5ceHnwck7W9bhAqZdd7SuG7w4/P2F/GaJh8c7e9qgow+Q7cGBo+98WsLkuktFqiZabtXuQTu/Y5ETbR0v7tNSFnvrmu6pjdoan2KjMu8q/Hmj1EfCO2ZGfEIbIXKUlw8qaX9/b2oeSJmFksSeT/Fn0V3nSypChh4Gjh74ybO9aeZ/AN2dwciu2/MhAAAAAElFTkSuQmCC">00_TS基础<!----></h1> <!----> <div class="theme-vdoing-content content__default"><h1 id="_1-类型"><a href="#_1-类型" class="header-anchor">#</a> 1. 类型</h1> <h3 id="_1-1-基础类型"><a href="#_1-1-基础类型" class="header-anchor">#</a> 1.1 基础类型</h3> <h4 id="数值"><a href="#数值" class="header-anchor">#</a> 数值</h4> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">let</span> value<span class="token operator">:</span> <span class="token builtin">number</span> <span class="token operator">=</span> <span class="token number">10</span>
value <span class="token operator">=</span> <span class="token number">0o11</span>  <span class="token comment">// 二进制，8进制等等都可以</span>
</code></pre></div><h4 id="布尔"><a href="#布尔" class="header-anchor">#</a> 布尔</h4> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">let</span> value<span class="token operator">:</span> <span class="token builtin">boolean</span> <span class="token operator">=</span> <span class="token boolean">true</span>
value <span class="token operator">=</span> <span class="token boolean">false</span>
</code></pre></div><h4 id="字符串"><a href="#字符串" class="header-anchor">#</a> 字符串</h4> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">let</span> value<span class="token operator">:</span> <span class="token builtin">string</span> <span class="token operator">=</span> <span class="token string">'hello'</span>
</code></pre></div><h3 id="_1-2-数组和元组类型"><a href="#_1-2-数组和元组类型" class="header-anchor">#</a> 1.2 数组和元组类型</h3> <h4 id="数组类型"><a href="#数组类型" class="header-anchor">#</a> 数组类型</h4> <p>方式一：</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">let</span> arr1<span class="token operator">:</span> <span class="token builtin">Array</span><span class="token operator">&lt;</span><span class="token builtin">number</span><span class="token operator">&gt;</span>  <span class="token comment">// 定义了一个只能存放 number 类型的数组</span>
arr1 <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">]</span>   <span class="token comment">// TS 2322 类型错误</span>
</code></pre></div><p>方式二：</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">let</span> arr2<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span>    <span class="token comment">// 定义了一个只能存放 string 类型的数组</span>
</code></pre></div><p>联合类型：</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">let</span> arr3<span class="token operator">:</span> <span class="token punctuation">(</span><span class="token builtin">number</span> <span class="token operator">|</span> <span class="token builtin">string</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token punctuation">]</span>  <span class="token comment">// 定义了一个只能存放 number 和 string 类型的数组</span>
</code></pre></div><p>任意类型：</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">let</span> arr4<span class="token operator">:</span> <span class="token builtin">any</span>  <span class="token comment">// 数组中可以存放任意类型的数据</span>
</code></pre></div><h4 id="元组类型"><a href="#元组类型" class="header-anchor">#</a> 元组类型</h4> <p>TS 中的元组类型是数组类型的扩展，主要是创建 <strong>定长、定数据类型</strong> 的数据</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token comment">// 创建了一个数组，该数组只能存放 3 个数据</span>
<span class="token comment">// 且第一个数据必须是 string 类型，第二个必须是 number 类型，第三个必须是 boolean 类型</span>
<span class="token keyword">let</span> arr<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token builtin">string</span><span class="token punctuation">,</span> <span class="token builtin">number</span><span class="token punctuation">,</span> <span class="token builtin">boolean</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="_1-3-枚举类型"><a href="#_1-3-枚举类型" class="header-anchor">#</a> 1.3 枚举类型</h3> <h4 id="使用枚举"><a href="#使用枚举" class="header-anchor">#</a> 使用枚举</h4> <p>枚举类型是数组类型的补充 关键字<code>enum</code></p> <p>枚举一般用于几个固定的取值，比如一年只有4季，性别只有男女</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">enum</span> Gender <span class="token punctuation">{</span>
    Male<span class="token punctuation">,</span>
    Female
<span class="token punctuation">}</span>
</code></pre></div><p>使用枚举</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">let</span> value<span class="token operator">:</span> Gender<span class="token punctuation">;</span>   <span class="token comment">// 定义了一个变量，该变量只能存放 Male/Female</span>
value <span class="token operator">=</span> Gender<span class="token punctuation">.</span>Male
value <span class="token operator">=</span> Gender<span class="token punctuation">.</span>Female
</code></pre></div><h4 id="注意事项"><a href="#注意事项" class="header-anchor">#</a> 注意事项</h4> <p>TS 枚举的本质其实就是数值类型，所以赋值为数值类型不会报错</p> <div class="language-ts extra-class"><pre class="language-ts"><code>Gender<span class="token punctuation">.</span>Male    <span class="token comment">// 0</span>
Gender<span class="token punctuation">.</span>Female  <span class="token comment">// 1</span>
</code></pre></div><p>枚举类型的默认值是从上之下，从 0 开始递增，但是我们可以手动指定枚举的值</p> <p>如果手动指定前一个枚举值，那么后面的就会递增</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">enum</span> Gender <span class="token punctuation">{</span>
    Male <span class="token operator">=</span> <span class="token number">5</span><span class="token punctuation">,</span>
    Female
<span class="token punctuation">}</span>

Gender<span class="token punctuation">.</span>Female  <span class="token comment">// 6</span>
</code></pre></div><p>如果指定后一个枚举值，那么前面就会从 0 开始递增</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">enum</span> Gender <span class="token punctuation">{</span>
    Male<span class="token punctuation">,</span>
    Female <span class="token operator">=</span> <span class="token number">6</span>
<span class="token punctuation">}</span>

Gender<span class="token punctuation">.</span>Male   <span class="token comment">// 0</span>
</code></pre></div><p>枚举的值可以任意改</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">enum</span> Gender <span class="token punctuation">{</span>
    Male <span class="token operator">=</span> <span class="token number">100</span><span class="token punctuation">,</span>
    Female <span class="token operator">=</span> <span class="token number">12</span>
<span class="token punctuation">}</span>
</code></pre></div><p>我们不仅可以通过枚举键来获取值，还可以通过值来获取键</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">enum</span> Gender <span class="token punctuation">{</span>
    Male <span class="token operator">=</span> <span class="token number">6</span>
<span class="token punctuation">}</span>

Gender<span class="token punctuation">[</span><span class="token number">6</span><span class="token punctuation">]</span>   <span class="token comment">// Male</span>
</code></pre></div><p>这是怎么实现的？</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token comment">// 编译的 JS </span>
<span class="token string">'use strict'</span>
<span class="token keyword">var</span> <span class="token function">Gender</span>
<span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span>Gender<span class="token punctuation">)</span> <span class="token punctuation">{</span>
Gender<span class="token punctuation">[</span><span class="token punctuation">(</span>Gender<span class="token punctuation">[</span><span class="token string">'Male'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">6</span><span class="token punctuation">)</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">'Male'</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span>Gender <span class="token operator">||</span> <span class="token punctuation">(</span>Gender <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span>


<span class="token comment">// 👇 剖析出来就是这样的 👇</span>
<span class="token keyword">let</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
obj<span class="token punctuation">[</span>obj<span class="token punctuation">[</span><span class="token string">&quot;male&quot;</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">&quot;male&quot;</span>
obj <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token number">3</span><span class="token operator">:</span> <span class="token string">&quot;male&quot;</span><span class="token punctuation">,</span> male<span class="token operator">:</span> <span class="token number">3</span> <span class="token punctuation">}</span>
</code></pre></div><h3 id="_1-4-any-和-void-类型"><a href="#_1-4-any-和-void-类型" class="header-anchor">#</a> 1.4 any 和 void 类型</h3> <h4 id="any-类型"><a href="#any-类型" class="header-anchor">#</a> any 类型</h4> <p>表示任意类型，当我们不清楚这个值是什么类型的时候，可以给其 any 类型</p> <p>一般用于定义通用性较强的变量，或者从其他地方保存的不知道什么类型的变量</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">let</span> val<span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">;</span>
val <span class="token operator">=</span> <span class="token number">0</span>
val <span class="token operator">=</span> <span class="token string">&quot;aa&quot;</span>
val <span class="token operator">=</span> <span class="token boolean">true</span>
</code></pre></div><h4 id="void-类型"><a href="#void-类型" class="header-anchor">#</a> void 类型</h4> <p>void 类型与 any 类型正好相反，表示没有类型，一般用于函数返回值</p> <p>TS 只有 null/undefined 可以是 void 类型的</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">function</span> <span class="token function">test</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span> <span class="token punctuation">{</span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'test void'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> val<span class="token operator">:</span> <span class="token keyword">void</span><span class="token punctuation">;</span>   <span class="token comment">// 定义了一个变量，只能保存为 null 或 undefined</span>
</code></pre></div><h3 id="_1-5-never-和-object-类型"><a href="#_1-5-never-和-object-类型" class="header-anchor">#</a> 1.5 never 和 object 类型</h3> <h4 id="never-类型"><a href="#never-类型" class="header-anchor">#</a> never 类型</h4> <p>表示那些永不存在的类型，一般用于抛出异常或者根本不会有返回值的函数</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">function</span> <span class="token function">demo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">never</span> <span class="token punctuation">{</span>
    <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">'test never'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">demo2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">never</span> <span class="token punctuation">{</span>
    <span class="token keyword">while</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="object-类型"><a href="#object-类型" class="header-anchor">#</a> object 类型</h4> <p>表示一个对象类型，只能存放对象类型的数据</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">let</span> obj<span class="token operator">:</span> object
obj <span class="token operator">=</span> <span class="token punctuation">{</span>
    a<span class="token operator">:</span> <span class="token number">1</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="_1-6-类型断言"><a href="#_1-6-类型断言" class="header-anchor">#</a> 1.6 类型断言</h3> <h4 id="什么是类型断言"><a href="#什么是类型断言" class="header-anchor">#</a> 什么是类型断言</h4> <p>TS 中的类型断言其实更像是类型转换，可以将一种类型强制转换为另一种类型。</p> <p>类型断言就像是在告诉编译器：我知道我在干什么，你不用再检查了</p> <h4 id="使用类型断言"><a href="#使用类型断言" class="header-anchor">#</a> 使用类型断言</h4> <p>第一种方式：</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">let</span> str<span class="token operator">:</span> <span class="token builtin">any</span> <span class="token operator">=</span> <span class="token string">&quot;abc&quot;</span>  <span class="token comment">// 此时这里的 str 是 any 类型的，所以不能使用字符串的函数</span>
<span class="token comment">// str.length  // 会报错</span>
<span class="token keyword">let</span> len <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token operator">&lt;</span><span class="token builtin">string</span><span class="token operator">&gt;</span>str<span class="token punctuation">)</span><span class="token punctuation">.</span>length  <span class="token comment">// 将 any 类型转换为 string 类型</span>
</code></pre></div><p>第二种方式：</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">let</span> len2 <span class="token operator">=</span> <span class="token punctuation">(</span>str <span class="token keyword">as</span> <span class="token builtin">string</span><span class="token punctuation">)</span><span class="token punctuation">.</span>length  <span class="token comment">// 转换为 string 类型</span>
</code></pre></div><h4 id="注意"><a href="#注意" class="header-anchor">#</a> 注意</h4> <p>在企业开发中，更推荐使用<code>as</code>的方式来进行类型断言，因为第一种在<code>tsx</code>文件中会出现兼容问题</p> <h3 id="_1-7-自动类型推断"><a href="#_1-7-自动类型推断" class="header-anchor">#</a> 1.7 自动类型推断</h3> <h4 id="_1-什么是自动类型推断"><a href="#_1-什么是自动类型推断" class="header-anchor">#</a> 1. 什么是自动类型推断</h4> <p>不用告诉编译器具体是什么类型，编译器自动知道是什么类型的</p> <h4 id="_2-根据初始值自动推断"><a href="#_2-根据初始值自动推断" class="header-anchor">#</a> 2. 根据初始值自动推断</h4> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token comment">// 如果是先定义再初始化，是无法进行自动推断的</span>
<span class="token keyword">let</span> value<span class="token punctuation">;</span>
value <span class="token operator">=</span> <span class="token number">123</span><span class="token punctuation">;</span>

<span class="token comment">// 如果是定义的同时初始化，TS 就会自动进行类型推断</span>
<span class="token keyword">let</span> value <span class="token operator">=</span> <span class="token number">123</span> <span class="token comment">//  -&gt; let value: number = 123</span>
value <span class="token operator">=</span> <span class="token string">'aaa'</span>   <span class="token comment">//  error</span>

<span class="token comment">// 也可以自动推断出联合类型</span>
<span class="token keyword">let</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">'a'</span><span class="token punctuation">]</span> <span class="token comment">// -&gt; let arr: (number | string) = [1, 'a']</span>
arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'a'</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">]</span>  <span class="token comment">// error</span>
</code></pre></div><h4 id="_3-根据上下文类型自动推断"><a href="#_3-根据上下文类型自动推断" class="header-anchor">#</a> 3. 根据上下文类型自动推断</h4> <div class="language-ts extra-class"><pre class="language-ts"><code>window<span class="token punctuation">.</span><span class="token function-variable function">onmousedown</span> <span class="token operator">=</span> <span class="token punctuation">(</span>event<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>  <span class="token comment">// 自动推导出 event 是 MouseEvent 类型</span>
    event<span class="token punctuation">.</span>target
<span class="token punctuation">}</span>
</code></pre></div><h1 id="_2-接口"><a href="#_2-接口" class="header-anchor">#</a> 2. 接口</h1> <h3 id="_2-1-使用接口"><a href="#_2-1-使用接口" class="header-anchor">#</a> 2.1 使用接口</h3> <p>和 number、boolean、string、enum 这种基本类型一样，接口也是一种类型</p> <p><strong>定义一个接口类型</strong></p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">interface</span> <span class="token class-name">FullName</span> <span class="token punctuation">{</span>
    firstName<span class="token operator">:</span> <span class="token builtin">string</span>
    lastName<span class="token operator">:</span> <span class="token builtin">string</span>
<span class="token punctuation">}</span>
</code></pre></div><p>如果使用接口来约束变量或者形参，那么必须要按照接口走，类型、个数、位置都不能出错。</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">function</span> <span class="token function">getFullName</span><span class="token punctuation">(</span><span class="token punctuation">{</span>fistName<span class="token punctuation">,</span> lastName<span class="token punctuation">}</span><span class="token operator">:</span> FullName<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>firstName<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> - </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>lastName<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span>
<span class="token punctuation">}</span>

<span class="token function">getFullName</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token string">'aa'</span><span class="token punctuation">,</span> <span class="token string">'bb'</span><span class="token punctuation">}</span><span class="token punctuation">)</span>  <span class="token comment">// right</span>
<span class="token function">getFullName</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token string">'bb'</span><span class="token punctuation">}</span><span class="token punctuation">)</span>  <span class="token comment">// wrong</span>
<span class="token function">getFullName</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token string">'aaa'</span><span class="token punctuation">}</span><span class="token punctuation">)</span>       <span class="token comment">// wrong</span>
<span class="token function">getFullName</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token string">'a'</span><span class="token punctuation">,</span> <span class="token string">'b'</span><span class="token punctuation">,</span> <span class="token string">'c'</span><span class="token punctuation">}</span><span class="token punctuation">)</span>  <span class="token comment">// wrong</span>
</code></pre></div><p>那如果我们想要多一个多多个，少一个，少多个怎么办？</p> <h3 id="_2-2-可选变量"><a href="#_2-2-可选变量" class="header-anchor">#</a> 2.2 可选变量</h3> <p>如果少一个或少多个，那么就需要在定义是加入<code>?</code>来判断此可省略</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">interface</span> <span class="token class-name">FullName</span> <span class="token punctuation">{</span>
    firstName<span class="token operator">:</span> <span class="token builtin">string</span>
    lastName<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">string</span>
    middleName <span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">string</span>
<span class="token punctuation">}</span>
<span class="token comment">// 上面的接口，`lastName`和`middleName`都是可以不用填的</span>
</code></pre></div><h3 id="_2-3-索引签名"><a href="#_2-3-索引签名" class="header-anchor">#</a> 2.3 索引签名</h3> <p>如果多一个或者多多个参数，就需要绕开检查了</p> <p>方式一，使用类型断言：</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token function">getFullName</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    firstName<span class="token operator">:</span> <span class="token string">'aa'</span><span class="token punctuation">,</span>
    lastName<span class="token operator">:</span> <span class="token string">'bb'</span><span class="token punctuation">,</span>
    notName<span class="token operator">:</span> <span class="token string">'nihao'</span>
<span class="token punctuation">}</span> <span class="token keyword">as</span> FullName<span class="token punctuation">)</span>
</code></pre></div><p>类型断言可以让这段代码直接绕开类型检查</p> <p>方式二，使用变量【不推荐】</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">let</span> person <span class="token operator">=</span> <span class="token punctuation">{</span>
    firstName<span class="token operator">:</span> <span class="token string">'aa'</span><span class="token punctuation">,</span>
    lastName<span class="token operator">:</span> <span class="token string">'bb'</span><span class="token punctuation">,</span>
    notName<span class="token operator">:</span> <span class="token string">'nihao'</span>
<span class="token punctuation">}</span>
<span class="token function">getFullName</span><span class="token punctuation">(</span>person<span class="token punctuation">)</span>
</code></pre></div><p>方式三，使用索引签名【推荐】</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">interface</span> <span class="token class-name">FullName</span> <span class="token punctuation">{</span>
    firstName<span class="token operator">:</span> <span class="token builtin">string</span>
    lastName<span class="token operator">:</span> <span class="token builtin">string</span>
    <span class="token punctuation">[</span>propName<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">]</span><span class="token operator">:</span> <span class="token builtin">any</span>
<span class="token punctuation">}</span>
</code></pre></div><p>在定义接口的时候，上面的<code>propName</code>表示键只能是 string 类型的，而值可以是任意类型的(any)</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token function">getFullName</span><span class="token punctuation">(</span><span class="token punctuation">{</span>firstName<span class="token operator">:</span> <span class="token string">'aa'</span><span class="token punctuation">,</span> lastName<span class="token operator">:</span> <span class="token string">'bb'</span><span class="token punctuation">,</span> notName1<span class="token operator">:</span> <span class="token string">'aaaaa'</span><span class="token punctuation">,</span> notName2<span class="token operator">:</span> <span class="token string">'bbb'</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h4 id="索引签名"><a href="#索引签名" class="header-anchor">#</a> 索引签名</h4> <p>索引签名用于描述那些“通过索引得到”的类型，比如<code>arr[10]</code>或<code>obj[&quot;key&quot;]</code></p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token comment">// 定义了一个接口，将来所有被该接口约束的变量/形参，其键和值都必须是 string 类型的</span>
<span class="token keyword">interface</span> <span class="token class-name">FullName</span> <span class="token punctuation">{</span>
	<span class="token punctuation">[</span>propName<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">]</span><span class="token operator">:</span> <span class="token builtin">string</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> obj<span class="token operator">:</span> FullName <span class="token punctuation">{</span>
    <span class="token comment">// 只要键值满足索引签名的条件，无论多少个都可以</span>
	aa<span class="token operator">:</span> <span class="token string">'aaa'</span><span class="token punctuation">,</span>
    bb<span class="token operator">:</span> <span class="token string">'bbb'</span><span class="token punctuation">,</span>
    <span class="token comment">// cc: false,  // 报错</span>
    <span class="token boolean">false</span><span class="token operator">:</span> <span class="token string">'666'</span>  <span class="token comment">// 不会报错，这是因为无论 key 是什么类型，都会转为 string 类型的</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="_2-4-只读属性"><a href="#_2-4-只读属性" class="header-anchor">#</a> 2.4 只读属性</h3> <p>让对象的属性只能在对象刚刚创建的时候更改其值</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token comment">// 此接口的 lastName 无法被重新赋值</span>
<span class="token keyword">interface</span> <span class="token class-name">FullName</span> <span class="token punctuation">{</span>
    firstName<span class="token operator">:</span> <span class="token builtin">string</span>
    <span class="token keyword">readonly</span> lastName<span class="token operator">:</span> <span class="token builtin">string</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> myName<span class="token operator">:</span> FullName <span class="token punctuation">{</span>
    firstName<span class="token operator">:</span> <span class="token string">'alex'</span><span class="token punctuation">,</span>
    lastName<span class="token operator">:</span> <span class="token string">'white'</span>
<span class="token punctuation">}</span>

myName<span class="token punctuation">.</span>firstName <span class="token operator">=</span> <span class="token string">'tom'</span>  <span class="token comment">// right</span>
myName<span class="token punctuation">.</span>lastName <span class="token operator">=</span> <span class="token string">'zhang'</span> <span class="token comment">// wrong</span>
</code></pre></div><p>TS 内部对只读属性进行了扩展，扩展出来了一个只读数组</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">let</span> arr<span class="token operator">:</span> <span class="token builtin">Array</span><span class="token operator">&lt;</span><span class="token builtin">string</span><span class="token operator">&gt;</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'a'</span><span class="token punctuation">,</span> <span class="token string">'b'</span><span class="token punctuation">,</span> <span class="token string">'c'</span><span class="token punctuation">]</span>
arr<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">'123'</span>   <span class="token comment">// 默认情况下数组是可读可写</span>

<span class="token comment">// 定义只读数组</span>
<span class="token keyword">let</span> arr2<span class="token operator">:</span> ReadonlyArray<span class="token operator">&lt;</span><span class="token builtin">string</span><span class="token operator">&gt;</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'a'</span><span class="token punctuation">,</span> <span class="token string">'b'</span><span class="token punctuation">,</span> <span class="token string">'c'</span><span class="token punctuation">]</span>
arr2<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">'123'</span>  <span class="token comment">// 报错</span>
</code></pre></div><h3 id="_2-5-函数接口"><a href="#_2-5-函数接口" class="header-anchor">#</a> 2.5 函数接口</h3> <p>我们除了可以通过接口来限定对象之外，还可以通过接口来<strong>限定函数</strong></p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token comment">// 第一个参数必须是 number 类型，第二个参数必须是 number 类型</span>
<span class="token comment">// 返回必须是 number 类型</span>
<span class="token keyword">interface</span> <span class="token class-name">SumInterface</span> <span class="token punctuation">{</span>
	<span class="token punctuation">(</span>a<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">,</span> b<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">number</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> sum<span class="token operator">:</span> SumInterface <span class="token operator">=</span> <span class="token punctuation">(</span>num1<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">,</span> num2<span class="token operator">:</span><span class="token builtin">number</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">number</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> num1 <span class="token operator">+</span> num2
<span class="token punctuation">}</span>

<span class="token keyword">let</span> res <span class="token operator">=</span> <span class="token function">sum</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="_2-6-混合类型接口"><a href="#_2-6-混合类型接口" class="header-anchor">#</a> 2.6 混合类型接口</h3> <p>接口中既有对象属性，也有函数，需要约束那些类型，就要符合其条件</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">interface</span> <span class="token class-name">CountInterface</span> <span class="token punctuation">{</span>
    <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span><span class="token keyword">void</span>
    count<span class="token operator">:</span> <span class="token builtin">number</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> getCounter <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> CountInterface <span class="token punctuation">{</span>
    <span class="token comment">// 接口要求数据既要是一个没有参数，没有返回值的函数</span>
    <span class="token comment">// 又要是一个拥有 count 属性的对象</span>
    <span class="token comment">// fn 作为函数的时候，符合接口中函数接口的限定</span>
    <span class="token comment">// fn 作为对象的时候，符合接口中对象属性的限定</span>
    <span class="token keyword">let</span> fn <span class="token operator">=</span> <span class="token operator">&lt;</span>CountInterface<span class="token operator">&gt;</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        fn<span class="token punctuation">.</span>count<span class="token operator">++</span>
        <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>fn<span class="token punctuation">.</span>count<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    fn<span class="token punctuation">.</span>count <span class="token operator">=</span> <span class="token number">0</span>
    <span class="token keyword">return</span> fn
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="_2-7-接口的继承"><a href="#_2-7-接口的继承" class="header-anchor">#</a> 2.7 接口的继承</h3> <p>TS 中的接口和 JS 中的类其实都是可以被继承的</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">interface</span> <span class="token class-name">LengthInterface</span> <span class="token punctuation">{</span>
    length<span class="token operator">:</span> <span class="token builtin">number</span>
<span class="token punctuation">}</span>
<span class="token keyword">interface</span> <span class="token class-name">WidthInterface</span> <span class="token punctuation">{</span>
    width<span class="token operator">:</span> <span class="token builtin">number</span>
<span class="token punctuation">}</span>
<span class="token comment">// 冗余代码，其实可以直接写为继承</span>
<span class="token keyword">interface</span> <span class="token class-name">RectInterface</span> <span class="token keyword">extends</span> <span class="token class-name">LengthInterface</span><span class="token punctuation">,</span> WidthInterface <span class="token punctuation">{</span>
    <span class="token comment">// length: number</span>
    <span class="token comment">// width: number</span>
    color<span class="token operator">:</span> <span class="token builtin">string</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="_2-8-接口合并现象"><a href="#_2-8-接口合并现象" class="header-anchor">#</a> 2.8 接口合并现象</h3> <p>当我们定义了很多同名的接口，多个接口的内容将进行合并。</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">interface</span> <span class="token class-name">TestInterface</span> <span class="token punctuation">{</span>
    name<span class="token operator">:</span> <span class="token builtin">string</span>
<span class="token punctuation">}</span>
<span class="token keyword">interface</span> <span class="token class-name">TestInterface</span> <span class="token punctuation">{</span>
    age<span class="token operator">:</span> <span class="token builtin">number</span>
<span class="token punctuation">}</span>

<span class="token comment">// 自动合并为</span>

<span class="token keyword">interface</span> <span class="token class-name">TestInterface</span> <span class="token punctuation">{</span>
    name<span class="token operator">:</span> <span class="token builtin">string</span>
    age<span class="token operator">:</span> <span class="token builtin">string</span>
<span class="token punctuation">}</span>
</code></pre></div><h1 id="_3-函数"><a href="#_3-函数" class="header-anchor">#</a> 3. 函数</h1> <h3 id="_3-1-使用函数"><a href="#_3-1-使用函数" class="header-anchor">#</a> 3.1 使用函数</h3> <p>TS 的函数大部分和 JS 的函数相同</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token comment">// 命名函数</span>
<span class="token keyword">function</span> <span class="token function">fn1</span><span class="token punctuation">(</span>a<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span> <span class="token punctuation">{</span>
   <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span> 
<span class="token punctuation">}</span>
<span class="token comment">// 匿名函数</span>
<span class="token keyword">let</span> <span class="token function-variable function">fn2</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span>b<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span> <span class="token punctuation">{</span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token comment">// 箭头函数</span>
<span class="token keyword">let</span> fn3 <span class="token operator">=</span> <span class="token punctuation">(</span>c<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>c<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="_3-2-函数的完整格式"><a href="#_3-2-函数的完整格式" class="header-anchor">#</a> 3.2 函数的完整格式</h3> <p>在 TS 中的函数的完整格式应该是由函数的定义和实现两个部分组成的</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token comment">// 定义一个函数</span>
<span class="token keyword">let</span> <span class="token function-variable function">addFn</span><span class="token operator">:</span> <span class="token punctuation">(</span>a<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">,</span> b<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
<span class="token comment">// 根据定义实现函数</span>
addFn <span class="token operator">=</span> <span class="token punctuation">(</span>x<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">,</span> y<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">number</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> x <span class="token operator">+</span> y
<span class="token punctuation">}</span>
</code></pre></div><p>一步到位写法</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">let</span> <span class="token function">addFn</span><span class="token punctuation">(</span>a<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">,</span> b<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function-variable function">number</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>x<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">,</span> y<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">number</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> x <span class="token operator">+</span> y
<span class="token punctuation">}</span>
</code></pre></div><p>进一步优化写法</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token comment">// 根据函数的定义，自动推导对应的数据类型</span>
<span class="token keyword">let</span> <span class="token function">addFn</span><span class="token punctuation">(</span>a<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">,</span> b<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function-variable function">number</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> x <span class="token operator">+</span> y
<span class="token punctuation">}</span>
</code></pre></div><h3 id="_3-3-函数声明"><a href="#_3-3-函数声明" class="header-anchor">#</a> 3.3 函数声明</h3> <p>从上面我们可以看到，可以先声明一个函数，后面再去实现。使用<code>type</code>来声明函数</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token comment">// 先声明一个函数</span>
<span class="token keyword">type</span> <span class="token class-name">addFn</span><span class="token punctuation">(</span>a<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">,</span> b<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token builtin">number</span>
<span class="token comment">// 再根据声明实现一个函数</span>
<span class="token keyword">let</span> add<span class="token operator">:</span> addFn <span class="token operator">=</span> <span class="token punctuation">(</span>x<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">,</span> y<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">number</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> x <span class="token operator">+</span> y
<span class="token punctuation">}</span>
</code></pre></div><p>简写方式</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token comment">// 先声明一个函数</span>
<span class="token keyword">type</span> <span class="token class-name">addFn</span><span class="token punctuation">(</span>a<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">,</span> b<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token builtin">number</span>
<span class="token comment">// 再根据声明实现一个函数, 自动推导类型</span>
<span class="token keyword">let</span> add<span class="token operator">:</span> <span class="token function-variable function">addFn</span> <span class="token operator">=</span> <span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> x <span class="token operator">+</span> y
<span class="token punctuation">}</span>
</code></pre></div><h3 id="_3-4-函数重载"><a href="#_3-4-函数重载" class="header-anchor">#</a> 3.4 函数重载</h3> <p>函数的重载就是同名的函数可以根据不同的参数实现不同的功能</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token comment">// 定义函数的重载</span>
<span class="token keyword">function</span> <span class="token function">getArray</span><span class="token punctuation">(</span>x<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">[</span><span class="token punctuation">]</span>
<span class="token keyword">function</span> <span class="token function">getArray</span><span class="token punctuation">(</span>str<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span>

<span class="token comment">// 实现函数的重载</span>
<span class="token keyword">function</span> <span class="token function">getArray</span><span class="token punctuation">(</span>value<span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token keyword">typeof</span> value <span class="token operator">===</span> <span class="token string">'number'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">let</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> x<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            arr<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> arr  
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> value <span class="token operator">===</span> <span class="token string">'string'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> value<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token punctuation">{</span>
        <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'argument must be a string or number'</span><span class="token punctuation">)</span>
        <span class="token keyword">return</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
    <span class="token punctuation">}</span>
    
<span class="token punctuation">}</span>
</code></pre></div><h3 id="_3-5-函数的参数"><a href="#_3-5-函数的参数" class="header-anchor">#</a> 3.5 函数的参数</h3> <h4 id="可选参数"><a href="#可选参数" class="header-anchor">#</a> 可选参数</h4> <p>在形参定义时加入<code>?</code>代表该参数可以省略</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token comment">// 需求：实现 2 个数或者 3 个数相加</span>
<span class="token keyword">function</span> <span class="token function">add</span><span class="token punctuation">(</span>x<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">,</span> y<span class="token operator">:</span><span class="token builtin">number</span><span class="token punctuation">,</span> z<span class="token operator">?</span><span class="token operator">:</span><span class="token builtin">number</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">number</span> <span class="token punctuation">{</span>
	<span class="token keyword">return</span> x <span class="token operator">+</span> y <span class="token operator">+</span> <span class="token punctuation">(</span>z <span class="token operator">?</span> z <span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token function">add</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span>
<span class="token function">add</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">)</span>
</code></pre></div><p>在函数重载的时候也可以使用这个可选参数，这样可以让函数重载变得更加健壮</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">function</span> <span class="token function">add</span><span class="token punctuation">(</span>x<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">,</span> y<span class="token operator">:</span><span class="token builtin">number</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">number</span>
<span class="token keyword">function</span> <span class="token function">add</span><span class="token punctuation">(</span>x<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">,</span> y<span class="token operator">:</span><span class="token builtin">number</span><span class="token punctuation">,</span> z<span class="token operator">:</span><span class="token builtin">number</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">number</span>
<span class="token keyword">function</span> <span class="token function">add</span><span class="token punctuation">(</span>x<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">,</span> y<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">,</span> z<span class="token operator">?</span><span class="token operator">:</span><span class="token builtin">number</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">number</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> x <span class="token operator">+</span> y <span class="token operator">+</span> <span class="token punctuation">(</span>z <span class="token operator">?</span> z <span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><p>注意：</p> <ul><li>可选参数可以是一个或多个</li> <li>前面的参数是可选参数，后面的也一定要是可选参数</li></ul> <h4 id="默认参数"><a href="#默认参数" class="header-anchor">#</a> 默认参数</h4> <p>详见ES6-函数形参默认值</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">function</span> <span class="token function">add</span><span class="token punctuation">(</span>x<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">,</span> y<span class="token operator">:</span> <span class="token builtin">number</span> <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">number</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> x <span class="token operator">+</span> y
<span class="token punctuation">}</span>
<span class="token function">add</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span>  <span class="token comment">// 20</span>
</code></pre></div><h4 id="剩余参数"><a href="#剩余参数" class="header-anchor">#</a> 剩余参数</h4> <p>详见ES6-函数扩展运算符</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">function</span> <span class="token function">add2</span><span class="token punctuation">(</span>x<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">,</span> <span class="token operator">...</span>args<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">number</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> sum<span class="token operator">:</span> <span class="token builtin">number</span> <span class="token operator">=</span> <span class="token number">0</span>
  <span class="token keyword">let</span> each<span class="token operator">:</span> <span class="token builtin">number</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span>each <span class="token keyword">of</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    sum <span class="token operator">+=</span> each
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> x <span class="token operator">+</span> sum
<span class="token punctuation">}</span>

<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">add2</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre></div><h1 id="_4-泛型"><a href="#_4-泛型" class="header-anchor">#</a> 4. 泛型</h1> <h3 id="_4-1-什么是泛型"><a href="#_4-1-什么是泛型" class="header-anchor">#</a> 4.1 什么是泛型</h3> <p>在编写代码的时候我们既要考虑代码的健壮性，又要考虑代码的灵活性和可复用性。</p> <p>通过 TS 的静态检测能让我们的代码更加健壮安全，但是在健壮的同时却丢失了灵活性和可复用性，为了解决这个问题，TS 推出了泛型的概念。</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token comment">// 需求：定义一个创建数组的方法，可以创建出指定长度的数组，并且可以用任意内容填充这个数组</span>
<span class="token keyword">let</span> getArray <span class="token operator">=</span> <span class="token punctuation">(</span>value<span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">,</span> length<span class="token operator">:</span> <span class="token builtin">number</span> <span class="token operator">=</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name"><span class="token builtin">Array</span></span><span class="token punctuation">(</span>length<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">fill</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token keyword">let</span> arr <span class="token operator">=</span> <span class="token function">getArray</span><span class="token punctuation">(</span><span class="token number">6</span><span class="token punctuation">)</span>  <span class="token comment">// [6, 6, 6, 6, 6]</span>
</code></pre></div><p>但是直接使用<code>any</code>代码就不再健壮，并且会出现一些问题：</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token comment">// 1. 编写代码没有提示，因为 any 类型并不知道是否有 length 属性</span>
<span class="token comment">// 2. 哪怕代码写错了，也不会报错</span>
<span class="token keyword">let</span> res <span class="token operator">=</span> arr<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span>item <span class="token operator">=&gt;</span> item<span class="token punctuation">.</span>length<span class="token punctuation">)</span>
</code></pre></div><p>使用泛型就可以避免此类问题</p> <h3 id="_4-2-使用泛型"><a href="#_4-2-使用泛型" class="header-anchor">#</a> 4.2 使用泛型</h3> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">let</span> getArray <span class="token operator">=</span> <span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span><span class="token punctuation">(</span>value<span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">,</span> length<span class="token operator">:</span> <span class="token builtin">number</span> <span class="token operator">=</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name"><span class="token builtin">Array</span></span><span class="token punctuation">(</span>length<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">fill</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><p>以上代码的含义：在调用方法时告诉<code>T</code>是什么类型，那么<code>value</code>和<code>返回值</code>都会严格按照此类型</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">let</span> arr <span class="token operator">=</span> <span class="token generic-function"><span class="token function">getArray</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token builtin">string</span><span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span><span class="token string">'value'</span><span class="token punctuation">)</span>
<span class="token comment">// 其实类型也可以不指定，默认情况下ts会根据传值自动判断类型</span>
<span class="token keyword">let</span> arr2 <span class="token operator">=</span> <span class="token function">getArray</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span> <span class="token comment">// === getArray&lt;number&gt;(4)</span>
</code></pre></div><h3 id="_4-3-泛型约束"><a href="#_4-3-泛型约束" class="header-anchor">#</a> 4.3 泛型约束</h3> <h4 id="_1-什么是泛型约束"><a href="#_1-什么是泛型约束" class="header-anchor">#</a> 1. 什么是泛型约束</h4> <p>默认情况下我们可以指定泛型为任意类型，但是有些情况下我们需要指定的类型满足某些条件后才能指定。那么这个时候就可以使用泛型约束</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token comment">// 需求：可以指定任意类型的泛型，但是指定的类型必须有 length 属性</span>
<span class="token keyword">interface</span> <span class="token class-name">LengthInterface</span> <span class="token punctuation">{</span>
    length<span class="token operator">:</span> <span class="token builtin">number</span>
<span class="token punctuation">}</span>
<span class="token keyword">let</span> getArray <span class="token operator">=</span> <span class="token operator">&lt;</span><span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token class-name">LengthInterface</span><span class="token operator">&gt;</span><span class="token punctuation">(</span>value<span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">,</span> length<span class="token operator">:</span> <span class="token builtin">number</span> <span class="token operator">=</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name"><span class="token builtin">Array</span></span><span class="token punctuation">(</span>length<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">fill</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="_2-在泛型约束中使用类型参数"><a href="#_2-在泛型约束中使用类型参数" class="header-anchor">#</a> 2. 在泛型约束中使用类型参数</h4> <p>一个泛型被另一个泛型约束，就叫做泛型类型中使用类型参数</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token comment">// 需求：定义一个函数用于根据指定的 key 获取对象的 value</span>
<span class="token keyword">let</span> getProps <span class="token operator">=</span> <span class="token punctuation">(</span>obj<span class="token operator">:</span> object<span class="token punctuation">,</span> key<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">any</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> obj<span class="token punctuation">[</span>key<span class="token punctuation">]</span>
<span class="token punctuation">}</span>
<span class="token keyword">let</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>
    a<span class="token operator">:</span> <span class="token string">'a'</span>
<span class="token punctuation">}</span>
<span class="token comment">// undefined，但是编译时未报错，说明代码不够健壮</span>
<span class="token keyword">let</span> res <span class="token operator">=</span> <span class="token function">getProps</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> <span class="token string">'c'</span><span class="token punctuation">)</span>
</code></pre></div><div class="language-ts extra-class"><pre class="language-ts"><code><span class="token comment">// 修改一下，使用 keyof 作为索引类型</span>
<span class="token keyword">let</span> getProps <span class="token operator">=</span> <span class="token operator">&lt;</span><span class="token constant">T</span><span class="token punctuation">,</span> <span class="token constant">K</span> <span class="token keyword">extends</span> <span class="token keyword">keyof</span> <span class="token constant">T</span><span class="token operator">&gt;</span><span class="token punctuation">(</span>obj<span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">,</span> key<span class="token operator">:</span> <span class="token constant">K</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">any</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> obj<span class="token punctuation">[</span>key<span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><h1 id="_5-类"><a href="#_5-类" class="header-anchor">#</a> 5. 类</h1> <h3 id="_5-1-使用类"><a href="#_5-1-使用类" class="header-anchor">#</a> 5.1 使用类</h3> <p>TS 中的类和 JS 中的类基本相同</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">class</span> <span class="token class-name">Person</span> <span class="token punctuation">{</span>
    name<span class="token operator">:</span> <span class="token builtin">string</span>  <span class="token comment">// 和 ES6 的区别，需要先定义实例属性，才能使用实例属性</span>
    age<span class="token operator">:</span> <span class="token builtin">number</span>
    <span class="token comment">// 构造函数</span>
    <span class="token function">constructor</span><span class="token punctuation">(</span>name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span> age<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name
        <span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">=</span> age
    <span class="token punctuation">}</span>
    <span class="token comment">// 实例方法</span>
    <span class="token function">say</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span> <span class="token punctuation">{</span>
        <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">my name is </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">, my age is </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">this</span><span class="token punctuation">.</span>age<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// 静态属性</span>
    <span class="token keyword">static</span> food<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
    <span class="token comment">// 静态方法</span>
    <span class="token keyword">static</span> <span class="token function">eat</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span> <span class="token punctuation">{</span>
        <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">我正在吃</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">this</span><span class="token punctuation">.</span>food<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">let</span> p <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token string">'alex'</span><span class="token punctuation">,</span> <span class="token number">18</span><span class="token punctuation">)</span>
p<span class="token punctuation">.</span><span class="token function">say</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
Person<span class="token punctuation">.</span>food <span class="token operator">=</span> <span class="token string">'鸡蛋'</span>
Person<span class="token punctuation">.</span><span class="token function">eat</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token comment">// 继承</span>
<span class="token keyword">class</span> <span class="token class-name">Student</span> <span class="token keyword">extends</span> <span class="token class-name">Person</span> <span class="token punctuation">{</span>
    book<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
	<span class="token function">constructor</span><span class="token punctuation">(</span>name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span> age<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">,</span> book<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">(</span>name<span class="token punctuation">,</span> age<span class="token punctuation">)</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>book <span class="token operator">=</span> book
    <span class="token punctuation">}</span>
    <span class="token function">say</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span> <span class="token punctuation">{</span>
        <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">我是重新后的say</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">let</span> stu <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Student</span><span class="token punctuation">(</span><span class="token string">'zs'</span><span class="token punctuation">,</span> <span class="token number">19</span><span class="token punctuation">,</span> <span class="token string">'语文'</span><span class="token punctuation">)</span>
stu<span class="token punctuation">.</span><span class="token function">say</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
Student<span class="token punctuation">.</span>food <span class="token operator">=</span> <span class="token string">'牛奶'</span>
Student<span class="token punctuation">.</span><span class="token function">eat</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="_5-2-类属性修饰符"><a href="#_5-2-类属性修饰符" class="header-anchor">#</a> 5.2 类属性修饰符</h3> <ul><li><code>public</code>：只读</li> <li><code>protected</code>：受保护</li> <li><code>private</code>：私有</li> <li><code>readonly</code>：只读</li></ul> <h3 id="_5-3-类方法修饰符"><a href="#_5-3-类方法修饰符" class="header-anchor">#</a> 5.3 类方法修饰符</h3> <ul><li><code>public</code>：如果使用 public 来修饰方法，那么表示这个方法是公开的，可以在类的内部使用，也可以在子类中使用，也可以在外部使用</li> <li><code>protected</code>：如果使用 protected 来修饰方法，那么表示这个方法是受保护的，可以在类的内部使用，也可以在子类中使用</li> <li><code>private</code>：如果使用 private 修饰方法，那么表示这个方法是私有的，可以在类的内部使用</li></ul> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token comment">// 需求：有一个基类，所有的子类都继承于这个基类，但是我们不允许别人通过基类来创建对象</span>
<span class="token comment">// 在构造函数前加入修饰符 protected，就不能创建基于此类创建实例</span>
<span class="token keyword">class</span> <span class="token class-name">Person</span> <span class="token punctuation">{</span>
    name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
    <span class="token keyword">protected</span> <span class="token function">constructor</span><span class="token punctuation">(</span>name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name
    <span class="token punctuation">}</span>
    <span class="token function">say</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span> <span class="token punctuation">{</span>
		<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">Student</span> <span class="token keyword">extends</span> <span class="token class-name">Person</span> <span class="token punctuation">{</span>
   	age<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
    <span class="token function">constructor</span><span class="token punctuation">(</span>name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span> age<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">=</span> age
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// new Person() 报错</span>
<span class="token keyword">new</span> <span class="token class-name">Student</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="_5-4-类可选属性"><a href="#_5-4-类可选属性" class="header-anchor">#</a> 5.4 类可选属性</h3> <p>和接口可选属性一样，可传可不传的属性</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token comment">// 在 TS 中定义了实例属性，就必须在构造函数中使用，否则就会报错</span>
<span class="token keyword">class</span> <span class="token class-name">Person</span> <span class="token punctuation">{</span>
    name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
    age<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
    <span class="token function">constructor</span><span class="token punctuation">(</span>name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span> age<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name
        <span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">=</span> age
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> p <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token string">'alex'</span><span class="token punctuation">)</span> <span class="token comment">// 可传一个参数也不会报错</span>
</code></pre></div><h3 id="_5-5-类参数属性"><a href="#_5-5-类参数属性" class="header-anchor">#</a> 5.5 类参数属性</h3> <p>参数属性是用来简化代码的</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">class</span> <span class="token class-name">Person</span> <span class="token punctuation">{</span>
    <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token keyword">public</span> name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span> <span class="token keyword">public</span> age<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// 虽然没有在类中写属性，但是 public 修饰符，让类依然有属性</span>
<span class="token keyword">let</span> p <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token string">'alex'</span><span class="token punctuation">,</span> <span class="token number">13</span><span class="token punctuation">)</span>
<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>p<span class="token punctuation">)</span>  <span class="token comment">// { name: 'alex', age: 13 }</span>
</code></pre></div><h3 id="_5-6-类存取器"><a href="#_5-6-类存取器" class="header-anchor">#</a> 5.6 类存取器</h3> <p>通过 getter/setter 来截取对象成员的访问</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">class</span> <span class="token class-name">Person</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> _age<span class="token operator">:</span> <span class="token builtin">number</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token keyword">set</span> <span class="token function">age</span><span class="token punctuation">(</span>val<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>val <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">'年龄不可小于 0 '</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>_age <span class="token operator">=</span> val<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">get</span> <span class="token function">age</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">number</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>_age
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> p <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token comment">// p.age = -1  // error !</span>
p<span class="token punctuation">.</span>age <span class="token operator">=</span> <span class="token number">10</span>

<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>p<span class="token punctuation">.</span>age<span class="token punctuation">)</span>  <span class="token comment">// 10</span>
</code></pre></div><h3 id="_5-7-抽象类"><a href="#_5-7-抽象类" class="header-anchor">#</a> 5.7 抽象类</h3> <h4 id="_1-什么是抽象类"><a href="#_1-什么是抽象类" class="header-anchor">#</a> 1. 什么是抽象类</h4> <p>抽象类一般用于专门定义那些不希望被外界直接创建的类，抽象类一般用于定义基类，抽象类和接口一样用于约束子类。</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token comment">// 以后只要有类继承此抽象类，那么类中必须要有 name 属性 和 say 方法</span>
<span class="token keyword">abstract</span> <span class="token keyword">class</span> <span class="token class-name">Person</span> <span class="token punctuation">{</span>
    <span class="token keyword">abstract</span> name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
    <span class="token keyword">abstract</span> <span class="token function">say</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span><span class="token punctuation">;</span>
    <span class="token function">eat</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span> <span class="token punctuation">{</span>
        <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> is eating</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// let p = new Person() // error !</span>
<span class="token keyword">class</span> <span class="token class-name">Student</span> <span class="token keyword">extends</span> <span class="token class-name">Person</span> <span class="token punctuation">{</span>
    name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
    <span class="token function">constructor</span><span class="token punctuation">(</span>name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name
    <span class="token punctuation">}</span>
    <span class="token function">say</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span> <span class="token punctuation">{</span>
        <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">my name is </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="_2-抽象类和接口区别"><a href="#_2-抽象类和接口区别" class="header-anchor">#</a> 2. 抽象类和接口区别</h4> <p>接口中只能定义约束，不能定义具体实现。</p> <p>抽象类中既可以定义约束，也可以定义具体实现</p> <h3 id="_5-8-类和接口"><a href="#_5-8-类和接口" class="header-anchor">#</a> 5.8 类和接口</h3> <h4 id="_1-类实现接口"><a href="#_1-类实现接口" class="header-anchor">#</a> 1. 类实现接口</h4> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">interface</span> <span class="token class-name">PersonInterface</span> <span class="token punctuation">{</span>
    name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
    <span class="token function">say</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// 只要类实现和接口，那么该类必须实现接口的属性和方法</span>
<span class="token keyword">class</span> <span class="token class-name">Person</span> <span class="token keyword">implements</span> <span class="token class-name">PersonInterface</span> <span class="token punctuation">{</span>
 	name<span class="token operator">:</span> <span class="token builtin">string</span> <span class="token operator">=</span> <span class="token string">'alex'</span>
    <span class="token function">say</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="_2-接口继承类"><a href="#_2-接口继承类" class="header-anchor">#</a> 2. 接口继承类</h4> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">class</span> <span class="token class-name">Person</span> <span class="token punctuation">{</span>
    <span class="token keyword">protected</span> name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
    age<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
    <span class="token function">constructor</span><span class="token punctuation">(</span>name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span> age<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name
        <span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">=</span> age
    <span class="token punctuation">}</span>
    <span class="token function">say</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span> <span class="token punctuation">{</span>
        <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">-</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">this</span><span class="token punctuation">.</span>age<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// 注意点：如果一个接口继承了某个类，那么该接口就会继承这个类的所有属性和方法的约束</span>
<span class="token comment">// 注意点：如果继承的类中包含 protected 修饰的属性或方法，那么就只有这个类的子类能实现这个接口</span>
<span class="token keyword">interface</span> <span class="token class-name">PersonInterface</span> <span class="token keyword">extends</span> <span class="token class-name">Person</span> <span class="token punctuation">{</span>
    gender<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">Student</span> <span class="token keyword">extends</span> <span class="token class-name">Person</span> <span class="token keyword">implements</span> <span class="token class-name">PersonInterface</span> <span class="token punctuation">{</span>
    gender<span class="token operator">:</span> <span class="token builtin">string</span> <span class="token operator">=</span>  <span class="token string">'male'</span><span class="token punctuation">;</span>
    name<span class="token operator">:</span> <span class="token builtin">string</span> <span class="token operator">=</span> <span class="token string">'alex'</span><span class="token punctuation">;</span>
    age<span class="token operator">:</span> <span class="token builtin">number</span> <span class="token operator">=</span> <span class="token number">18</span>
    <span class="token function">say</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> s <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Student</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
s<span class="token punctuation">.</span><span class="token function">say</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="_5-9-类和泛型"><a href="#_5-9-类和泛型" class="header-anchor">#</a> 5.9 类和泛型</h3> <h4 id="_1-泛型类"><a href="#_1-泛型类" class="header-anchor">#</a> 1. 泛型类</h4> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">class</span> <span class="token class-name">Cache<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span></span> <span class="token punctuation">{</span>
    arr<span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token function">add</span><span class="token punctuation">(</span>value<span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token constant">T</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>arr<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span>
        <span class="token keyword">return</span> value
    <span class="token punctuation">}</span> 
    <span class="token function">all</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>arr
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> c <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Cache<span class="token operator">&lt;</span><span class="token builtin">number</span><span class="token operator">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span>
c<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
c<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>
<span class="token comment">// c.add('3') // 报错，只能使用泛型的 number</span>
<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>c<span class="token punctuation">.</span><span class="token function">all</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre></div><h1 id="_6-枚举"><a href="#_6-枚举" class="header-anchor">#</a> 6. 枚举</h1> <p>TS 中支持数字枚举和字符串枚举两种类型，默认情况下就是数字枚举</p> <h3 id="_6-1-数字枚举"><a href="#_6-1-数字枚举" class="header-anchor">#</a> 6.1 数字枚举</h3> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">enum</span> Gender <span class="token punctuation">{</span>
    Male<span class="token punctuation">,</span>
    Female
<span class="token punctuation">}</span>

<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Gender<span class="token punctuation">.</span>male<span class="token punctuation">)</span>   <span class="token comment">// 0</span>
<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Gender<span class="token punctuation">.</span>female<span class="token punctuation">)</span> <span class="token comment">// 1</span>
</code></pre></div><h4 id="注意点"><a href="#注意点" class="header-anchor">#</a> 注意点</h4> <ul><li>数字枚举的取值默认以 0 开始，递增</li> <li>数字枚举的取值可以是字面量，也可以是常量，也可以是计算的结果</li> <li>如果使用常量或计算结果给前面的枚举值赋值，那么后面的枚举值也需要手动的赋值</li></ul> <h3 id="_6-2-枚举的反向映射"><a href="#_6-2-枚举的反向映射" class="header-anchor">#</a> 6.2 枚举的反向映射</h3> <p>可以根据枚举值获取到原始值，也可以根据原始值获取到枚举值</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">enum</span> Gender <span class="token punctuation">{</span>
    Male<span class="token punctuation">,</span>
    Female
<span class="token punctuation">}</span>
<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Gender<span class="token punctuation">.</span>Male<span class="token punctuation">)</span>  <span class="token comment">// 通过枚举值获取原始值</span>
<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Gender<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span>    <span class="token comment">// 通过原始值获取枚举值</span>
</code></pre></div><h3 id="_6-3-字符串枚举"><a href="#_6-3-字符串枚举" class="header-anchor">#</a> 6.3 字符串枚举</h3> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">enum</span> Gender <span class="token punctuation">{</span>
    Male <span class="token operator">=</span> <span class="token string">'男'</span><span class="token punctuation">,</span>
    Female <span class="token operator">=</span> <span class="token string">'女'</span> <span class="token comment">// 如果使用字符串给前面的枚举赋值了，那么后面的也需要手动赋值</span>
<span class="token punctuation">}</span>
<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Gender<span class="token punctuation">.</span>Male<span class="token punctuation">)</span>  <span class="token comment">// 男</span>
</code></pre></div><h4 id="注意点-2"><a href="#注意点-2" class="header-anchor">#</a> 注意点</h4> <ul><li><p>如果使用字符串给前面的枚举赋值了，那么后面的也需要手动赋值</p></li> <li><p>和数字枚举不一样，字符串枚举不能使用常量或者计算结果给枚举值赋值</p></li> <li><p>字符串枚举无法根据原始值来获取枚举值</p></li> <li><p>虽然字符串枚举不能使用常量或者计算结果赋值，但是可以使用内部的其他枚举的值来赋值</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">enum</span> Gender <span class="token punctuation">{</span>
    Male <span class="token operator">=</span> <span class="token string">'男'</span><span class="token punctuation">,</span>
    Female <span class="token operator">=</span> <span class="token string">'女'</span><span class="token punctuation">,</span>
    Test <span class="token operator">=</span> Male
<span class="token punctuation">}</span>
</code></pre></div></li></ul> <h3 id="_6-4-异构枚举"><a href="#_6-4-异构枚举" class="header-anchor">#</a> 6.4 异构枚举</h3> <p>枚举中既包含数字，又包含字符串，我们就称为异构枚举</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">enum</span> Gender <span class="token punctuation">{</span>
    Male <span class="token operator">=</span> <span class="token number">6</span><span class="token punctuation">,</span>
    Female <span class="token operator">=</span> <span class="token string">'test'</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="_6-5-枚举成员类型"><a href="#_6-5-枚举成员类型" class="header-anchor">#</a> 6.5 枚举成员类型</h3> <p>我们可以把枚举成员当作类型来使用</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">enum</span> Gender <span class="token punctuation">{</span>
    Male<span class="token punctuation">,</span>
    Female
<span class="token punctuation">}</span>

<span class="token keyword">interface</span> <span class="token class-name">TestInterface</span> <span class="token punctuation">{</span>
    age<span class="token operator">:</span> Gender<span class="token punctuation">.</span>Male
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">Person</span> <span class="token keyword">implements</span> <span class="token class-name">TestInterface</span> <span class="token punctuation">{</span>
    <span class="token comment">// age: Gender.Male √</span>
    <span class="token comment">// age: Gender.Female  // 由于类型不匹配，所以会报错</span>
    age<span class="token operator">:</span> <span class="token number">0</span> <span class="token comment">// 注意：由于数字枚举本身就是数值，所以这里写数字也不会报错</span>
<span class="token punctuation">}</span>
</code></pre></div><div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">enum</span> Gender <span class="token punctuation">{</span>
    Male<span class="token operator">:</span> <span class="token string">'男'</span><span class="token punctuation">,</span>
    Female<span class="token operator">:</span> <span class="token string">'女'</span>
<span class="token punctuation">}</span>

<span class="token keyword">interface</span> <span class="token class-name">TestInterface</span> <span class="token punctuation">{</span>
	age<span class="token operator">:</span> Gender<span class="token punctuation">.</span>Male
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">Person</span> <span class="token keyword">implements</span> <span class="token class-name">TestInterface</span> <span class="token punctuation">{</span>
    <span class="token comment">// age: '男'    // error</span>
    <span class="token comment">// age: string  // error</span>
    <span class="token comment">// 注意点，如果是字符串枚举，那么只能是枚举成员的值，不能是其他的值</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="_6-6-联合枚举类型"><a href="#_6-6-联合枚举类型" class="header-anchor">#</a> 6.6 联合枚举类型</h3> <p>我们可以把枚举类型当作一个联合类型来使用</p> <h4 id="_1-什么是联合类型"><a href="#_1-什么是联合类型" class="header-anchor">#</a> 1. 什么是联合类型</h4> <p>联合类型就是将多种数据通过 | 连接起来</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token comment">// (number | string) 联合类型</span>
<span class="token keyword">let</span> value<span class="token operator">:</span> <span class="token punctuation">(</span><span class="token builtin">number</span> <span class="token operator">|</span> <span class="token builtin">string</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
value <span class="token operator">=</span> <span class="token number">0</span>
value <span class="token operator">=</span> <span class="token string">'1'</span>
</code></pre></div><h4 id="_2-什么是联合枚举类型"><a href="#_2-什么是联合枚举类型" class="header-anchor">#</a> 2. 什么是联合枚举类型</h4> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">enum</span> Gender <span class="token punctuation">{</span>
    Male<span class="token punctuation">,</span>
    Female
<span class="token punctuation">}</span>
<span class="token keyword">interface</span> <span class="token class-name">TestInterface</span> <span class="token punctuation">{</span>
    age<span class="token operator">:</span> Gender   <span class="token comment">// age: (Gender.Male | Gender.Female)</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="_6-7-运行时枚举"><a href="#_6-7-运行时枚举" class="header-anchor">#</a> 6.7 运行时枚举</h3> <p>枚举在编译之后是一个真实存储的对象，所以可以在运行时使用</p> <p>而像接口这种只是用来做约束做静态检查的代码，编译后将不再存在</p> <h3 id="_6-8-常量枚举"><a href="#_6-8-常量枚举" class="header-anchor">#</a> 6.8 常量枚举</h3> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token comment">// 普通枚举</span>
<span class="token keyword">enum</span> Gender <span class="token punctuation">{</span>
    Male<span class="token punctuation">,</span>
    Female
<span class="token punctuation">}</span>
<span class="token comment">// 常量枚举</span>
<span class="token keyword">const</span> <span class="token keyword">enum</span> Gender2 <span class="token punctuation">{</span>
    Male<span class="token punctuation">,</span>
    Female
<span class="token punctuation">}</span>
</code></pre></div><h5 id="区别"><a href="#区别" class="header-anchor">#</a> 区别：</h5> <ul><li>普通枚举会生成真实存在的对象</li> <li>常量枚举不会生成真实存在的对象</li> <li>而是利用枚举成员的值直接替换到使用到的地方</li> <li>常量枚举可以减少页面体积</li></ul> <h1 id="_7-兼容"><a href="#_7-兼容" class="header-anchor">#</a> 7. 兼容</h1> <h3 id="_7-1-类型兼容性"><a href="#_7-1-类型兼容性" class="header-anchor">#</a> 7.1 类型兼容性</h3> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">interface</span> <span class="token class-name">TestInterface</span> <span class="token punctuation">{</span>
    name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> p1 <span class="token operator">=</span> <span class="token punctuation">{</span>name<span class="token operator">:</span> <span class="token string">'alex'</span><span class="token punctuation">}</span>
<span class="token keyword">let</span> p2 <span class="token operator">=</span> <span class="token punctuation">{</span>age<span class="token operator">:</span> <span class="token number">18</span><span class="token punctuation">}</span>
<span class="token keyword">let</span> p3 <span class="token operator">=</span> <span class="token punctuation">{</span>name<span class="token operator">:</span> <span class="token string">'alex'</span><span class="token punctuation">,</span> age<span class="token operator">:</span> <span class="token number">18</span><span class="token punctuation">}</span>
         
<span class="token keyword">let</span> t<span class="token operator">:</span> TestInterface<span class="token punctuation">;</span>

<span class="token comment">// 对象类型和接口类型是兼容的</span>
t <span class="token operator">=</span> p1<span class="token punctuation">;</span>
t <span class="token operator">=</span> p2<span class="token punctuation">;</span> <span class="token comment">// 报错</span>
t <span class="token operator">=</span> p3<span class="token punctuation">;</span> <span class="token comment">// 也可以兼容，可多不可少</span>
</code></pre></div><h3 id="_7-2-函数兼容性"><a href="#_7-2-函数兼容性" class="header-anchor">#</a> 7.2 函数兼容性</h3> <h4 id="_1-参数个数"><a href="#_1-参数个数" class="header-anchor">#</a> 1. 参数个数</h4> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">let</span> <span class="token function-variable function">fn1</span> <span class="token operator">=</span> <span class="token punctuation">(</span>x<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">,</span> y<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token keyword">let</span> <span class="token function-variable function">fn2</span> <span class="token operator">=</span> <span class="token punctuation">(</span>x<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

fn1 <span class="token operator">=</span> fn2
fn2 <span class="token operator">=</span> fn1 <span class="token comment">// 报错，可少不能多</span>
</code></pre></div><h4 id="_2-参数类型"><a href="#_2-参数类型" class="header-anchor">#</a> 2. 参数类型</h4> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">let</span> <span class="token function-variable function">fn1</span> <span class="token operator">=</span> <span class="token punctuation">(</span>x<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token keyword">let</span> <span class="token function-variable function">fn2</span> <span class="token operator">=</span> <span class="token punctuation">(</span>x<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token keyword">let</span> <span class="token function-variable function">fn3</span> <span class="token operator">=</span> <span class="token punctuation">(</span>x<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

fn1 <span class="token operator">=</span> fn2
fn2 <span class="token operator">=</span> fn1

fn3 <span class="token operator">=</span> fn2 <span class="token comment">// 报错，参数类型必须相同</span>
</code></pre></div><h4 id="_3-返回值类型"><a href="#_3-返回值类型" class="header-anchor">#</a> 3. 返回值类型</h4> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">let</span> fn1 <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">number</span> <span class="token operator">=&gt;</span> <span class="token number">134</span>
<span class="token keyword">let</span> fn2 <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">number</span> <span class="token operator">=&gt;</span> <span class="token number">456</span>
<span class="token keyword">let</span> fn3 <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">string</span> <span class="token operator">=&gt;</span> <span class="token string">'aaa'</span>

fn1 <span class="token operator">=</span> fn2
fn2 <span class="token operator">=</span> fn1
fn3 <span class="token operator">=</span> fn1 <span class="token comment">// 报错，返回值类型必须相同</span>
</code></pre></div><h4 id="_4-函数的双向协变"><a href="#_4-函数的双向协变" class="header-anchor">#</a> 4. 函数的双向协变</h4> <h5 id="参数的双向协变"><a href="#参数的双向协变" class="header-anchor">#</a> 参数的双向协变</h5> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">let</span> <span class="token function-variable function">fn1</span> <span class="token operator">=</span> <span class="token punctuation">(</span>x<span class="token operator">:</span> <span class="token punctuation">(</span><span class="token builtin">number</span> <span class="token operator">|</span> <span class="token builtin">string</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token keyword">let</span> <span class="token function-variable function">fn2</span> <span class="token operator">=</span> <span class="token punctuation">(</span>x<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

fn1 <span class="token operator">=</span> fn2
fn2 <span class="token operator">=</span> fn1
</code></pre></div><h5 id="返回值的双向协变"><a href="#返回值的双向协变" class="header-anchor">#</a> 返回值的双向协变</h5> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">let</span> fn1 <span class="token operator">=</span> <span class="token punctuation">(</span>x<span class="token operator">:</span> <span class="token builtin">boolean</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token builtin">number</span> <span class="token operator">|</span> <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> x <span class="token operator">?</span> <span class="token number">123</span> <span class="token operator">:</span> <span class="token string">'abc'</span>
<span class="token keyword">let</span> fn2 <span class="token operator">=</span> <span class="token punctuation">(</span>x<span class="token operator">:</span> <span class="token builtin">boolean</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">number</span> <span class="token operator">=&gt;</span> <span class="token number">456</span>

fn2 <span class="token operator">=</span> fn1  <span class="token comment">// 报错，不能将返回值是联合类型的赋值给具体类型的</span>
fn1 <span class="token operator">=</span> fn2  <span class="token comment">// 但是可以从具体类型转到联合类型的</span>
</code></pre></div><h4 id="_5-函数重载"><a href="#_5-函数重载" class="header-anchor">#</a> 5. 函数重载</h4> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">function</span> <span class="token function">add</span><span class="token punctuation">(</span>x<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">,</span> y<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
<span class="token keyword">function</span> <span class="token function">add</span><span class="token punctuation">(</span>x<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span> y<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
<span class="token keyword">function</span> <span class="token function">add</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> x <span class="token operator">+</span> y
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">sub</span><span class="token punctuation">(</span>x<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">,</span> y<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
<span class="token keyword">function</span> <span class="token function">sub</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> x <span class="token operator">-</span> y
<span class="token punctuation">}</span>

<span class="token keyword">let</span> fn1 <span class="token operator">=</span> add<span class="token punctuation">;</span>

fn1 <span class="token operator">=</span> sub <span class="token comment">// 不能将重载少的赋值给重载多的</span>

<span class="token keyword">let</span> fn2 <span class="token operator">=</span> sub<span class="token punctuation">;</span>
fn2 <span class="token operator">=</span> add <span class="token comment">// 但是可以将重载多的赋值给重载少的</span>
</code></pre></div><h3 id="_7-3-枚举兼容性"><a href="#_7-3-枚举兼容性" class="header-anchor">#</a> 7.3 枚举兼容性</h3> <h4 id="_1-数字枚举与数值兼容"><a href="#_1-数字枚举与数值兼容" class="header-anchor">#</a> 1. 数字枚举与数值兼容</h4> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">enum</span> Gender <span class="token punctuation">{</span>
    Male<span class="token punctuation">,</span>
    Female
<span class="token punctuation">}</span>
<span class="token keyword">let</span> value<span class="token operator">:</span> Gender<span class="token punctuation">;</span>
value <span class="token operator">=</span> Gender<span class="token punctuation">.</span>Male
value <span class="token operator">=</span> <span class="token number">0</span>
</code></pre></div><h4 id="_2-数字枚举与数字枚举不兼容"><a href="#_2-数字枚举与数字枚举不兼容" class="header-anchor">#</a> 2. 数字枚举与数字枚举不兼容</h4> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">enum</span> Gender <span class="token punctuation">{</span>
    Male<span class="token punctuation">,</span>
    Female
<span class="token punctuation">}</span>

<span class="token keyword">enum</span> Animal <span class="token punctuation">{</span>
    Dog<span class="token punctuation">,</span>
    Cat
<span class="token punctuation">}</span>

<span class="token keyword">let</span> value1<span class="token operator">:</span> Gender <span class="token operator">=</span> Gender<span class="token punctuation">.</span>Male<span class="token punctuation">;</span>
value <span class="token operator">=</span> Animal<span class="token punctuation">.</span>Dog<span class="token punctuation">;</span>  <span class="token comment">// 报错</span>
</code></pre></div><h4 id="_3-字符串枚举与字符串不兼容"><a href="#_3-字符串枚举与字符串不兼容" class="header-anchor">#</a> 3. 字符串枚举与字符串不兼容</h4> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">enum</span> Gender <span class="token punctuation">{</span>
    Male <span class="token operator">=</span> <span class="token string">'男'</span><span class="token punctuation">,</span>
    Female <span class="token operator">=</span> <span class="token string">'女'</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> value<span class="token operator">:</span> Gender <span class="token operator">=</span> Gender<span class="token punctuation">.</span>Male<span class="token punctuation">;</span>
value <span class="token operator">=</span> <span class="token string">'男'</span>  <span class="token comment">// 报错</span>
</code></pre></div><h3 id="_7-4-类兼容性"><a href="#_7-4-类兼容性" class="header-anchor">#</a> 7.4 类兼容性</h3> <h4 id="_1-只比较实例成员-不比较类的构造函数和静态成员"><a href="#_1-只比较实例成员-不比较类的构造函数和静态成员" class="header-anchor">#</a> 1. 只比较实例成员，不比较类的构造函数和静态成员</h4> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">class</span> <span class="token class-name">Person</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
    <span class="token comment">// 只能多不能少</span>
    <span class="token comment">// public age: number;</span>
    <span class="token comment">// 不会比较静态成员</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> age<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
    <span class="token comment">// 不会比较构造函数</span>
    <span class="token function">constructor</span><span class="token punctuation">(</span>name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span> age<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">Animal</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
    <span class="token function">constructor</span><span class="token punctuation">(</span>name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="_2-类的私有属性和受保护属性会影响兼容性"><a href="#_2-类的私有属性和受保护属性会影响兼容性" class="header-anchor">#</a> 2. 类的私有属性和受保护属性会影响兼容性</h4> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">class</span> <span class="token class-name">Person</span> <span class="token punctuation">{</span>
    <span class="token comment">// 私有属性和受保护属性会影响兼容性</span>
    <span class="token keyword">private</span> name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
    <span class="token keyword">protected</span> age<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">Animal</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="_7-5-泛型兼容性"><a href="#_7-5-泛型兼容性" class="header-anchor">#</a> 7.5 泛型兼容性</h3> <p>泛型只影响使用的部分，不会影响声明的部分</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">interface</span> <span class="token class-name">TestInterface<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span></span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token keyword">let</span> t1<span class="token operator">:</span> TestInterface<span class="token operator">&lt;</span><span class="token builtin">number</span><span class="token operator">&gt;</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> t2<span class="token operator">:</span> TestInterface<span class="token operator">&lt;</span><span class="token builtin">string</span><span class="token operator">&gt;</span><span class="token punctuation">;</span>

t1 <span class="token operator">=</span> t2<span class="token punctuation">;</span>
t2 <span class="token operator">=</span> t1<span class="token punctuation">;</span> <span class="token comment">// 不影响声明部分</span>


<span class="token keyword">interface</span> <span class="token class-name">TestInterface<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span></span> <span class="token punctuation">{</span>
    age<span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">let</span> t1<span class="token operator">:</span> TestInterface<span class="token operator">&lt;</span><span class="token builtin">number</span><span class="token operator">&gt;</span><span class="token punctuation">;</span> <span class="token comment">// age: number</span>
<span class="token keyword">let</span> t2<span class="token operator">:</span> TestInterface<span class="token operator">&lt;</span><span class="token builtin">string</span><span class="token operator">&gt;</span><span class="token punctuation">;</span> <span class="token comment">// age: string</span>

t1 <span class="token operator">=</span> t2<span class="token punctuation">;</span> <span class="token comment">// 报错，</span>
t2 <span class="token operator">=</span> t1<span class="token punctuation">;</span> <span class="token comment">// 只影响使用部分</span>
</code></pre></div><h1 id="_8-高级类型"><a href="#_8-高级类型" class="header-anchor">#</a> 8 高级类型</h1> <h3 id="_8-1-交叉类型"><a href="#_8-1-交叉类型" class="header-anchor">#</a> 8.1 交叉类型</h3> <ul><li>格式：<code>type1 &amp; type2 &amp; ...</code></li> <li>交叉类型是将多个类型合并为<strong>一个类型</strong></li></ul> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">let</span> mergeFn <span class="token operator">=</span> <span class="token operator">&lt;</span><span class="token constant">T</span><span class="token punctuation">,</span> <span class="token constant">U</span><span class="token operator">&gt;</span> <span class="token punctuation">(</span>arg1<span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">,</span> arg2<span class="token operator">:</span> <span class="token constant">U</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token constant">T</span> <span class="token operator">&amp;</span> <span class="token constant">U</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> res <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token keyword">as</span> <span class="token punctuation">(</span><span class="token constant">T</span> <span class="token operator">&amp;</span> <span class="token constant">U</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    res <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">assign</span><span class="token punctuation">(</span>arg1<span class="token punctuation">,</span> arg2<span class="token punctuation">)</span>
    <span class="token keyword">return</span> res
<span class="token punctuation">}</span>

<span class="token keyword">let</span> res <span class="token operator">=</span> <span class="token function">mergeFn</span><span class="token punctuation">(</span><span class="token punctuation">{</span>name<span class="token operator">:</span> <span class="token string">'aaa'</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>age<span class="token operator">:</span> <span class="token number">18</span><span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span>  <span class="token comment">// { name: 'aaa', age: 18 }</span>
</code></pre></div><h3 id="_8-2-联合类型"><a href="#_8-2-联合类型" class="header-anchor">#</a> 8.2 联合类型</h3> <ul><li>格式：<code>type1 | type2 | ...</code></li> <li>联合类型是多个类型中的任意类型</li></ul> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">let</span> value<span class="token operator">:</span> <span class="token punctuation">(</span><span class="token builtin">number</span> <span class="token operator">|</span> <span class="token builtin">string</span> <span class="token operator">|</span> <span class="token builtin">boolean</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

value <span class="token operator">=</span> <span class="token number">123</span>
value <span class="token operator">=</span> <span class="token string">'abc'</span>
value <span class="token operator">=</span> <span class="token boolean">true</span>
</code></pre></div><h3 id="_8-3-类型保护"><a href="#_8-3-类型保护" class="header-anchor">#</a> 8.3 类型保护</h3> <p>对于<strong>联合类型</strong>的变量，在使用时要确切告诉编译器它是哪一种类型，通过类型断言或者类型保护。</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">let</span> getRandomValue <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token builtin">string</span> <span class="token operator">|</span> <span class="token builtin">number</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> value <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>value <span class="token operator">&gt;=</span> <span class="token number">0.5</span><span class="token punctuation">)</span> <span class="token operator">?</span> <span class="token string">'abc'</span> <span class="token operator">:</span> <span class="token number">123.123</span>
<span class="token punctuation">}</span>
<span class="token comment">// 如果是字符串，就获取到字符串的长度，如果是数值，就省略小数位</span>
<span class="token comment">// 通过类型断言，需要每一次都要断言类型，所以比较麻烦</span>
<span class="token keyword">if</span><span class="token punctuation">(</span><span class="token punctuation">(</span>value <span class="token keyword">as</span> <span class="token builtin">string</span><span class="token punctuation">)</span><span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token punctuation">{</span>
     <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token punctuation">(</span>value <span class="token keyword">as</span> <span class="token builtin">string</span><span class="token punctuation">)</span><span class="token punctuation">.</span>length<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token punctuation">{</span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token punctuation">(</span>value <span class="token keyword">as</span> <span class="token builtin">number</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toFixed</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token comment">// 因此我们也可以使用类型保护</span>

<span class="token comment">// 定义了一个类型保护函数，这个函数的返回类型是一个 boolean 类型</span>
<span class="token comment">// 这个函数的返回值类型是传入的参数是否是 string 类型的</span>
<span class="token keyword">function</span> <span class="token function">isString</span><span class="token punctuation">(</span>value<span class="token operator">:</span> <span class="token punctuation">(</span><span class="token builtin">string</span> <span class="token operator">|</span> <span class="token builtin">number</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">:</span> value <span class="token keyword">is</span> <span class="token builtin">string</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">typeof</span> value <span class="token operator">===</span> <span class="token string">'string'</span>
<span class="token punctuation">}</span>
<span class="token keyword">if</span><span class="token punctuation">(</span><span class="token function">isString</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
     <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>value<span class="token punctuation">.</span>length<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token punctuation">{</span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>value<span class="token punctuation">.</span><span class="token function">toFixed</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><div class="language-ts extra-class"><pre class="language-ts"><code><span class="token comment">// 除了可以通过定义类型保护函数的方式来告诉编译器使用联合类型的变量具体是类型之外</span>
<span class="token comment">// 还可以使用 typeof 来实现类型保护</span>
<span class="token keyword">if</span><span class="token punctuation">(</span><span class="token keyword">typeof</span> value <span class="token operator">===</span> <span class="token string">'string'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
     <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>value<span class="token punctuation">.</span>length<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token punctuation">{</span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>value<span class="token punctuation">.</span><span class="token function">toFixed</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><p>注意点：</p> <ul><li>如果使用<code>typeof</code>来实现类型保护，那么只能用<code>===</code>或者<code>!==</code></li> <li>如果使用<code>typeof</code>来实现类型保护，那么只能保护<code>number/string/boolean/symbol</code>类型</li></ul> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token comment">// 除了可以通过 typeof 类实现类型保护之外，还可以通过 instanceof 来实现类型保护</span>
<span class="token keyword">class</span> <span class="token class-name">Person</span> <span class="token punctuation">{</span>
    name<span class="token operator">:</span> <span class="token builtin">string</span> <span class="token operator">=</span> <span class="token string">'alex'</span>
<span class="token punctuation">}</span>
<span class="token keyword">class</span> <span class="token class-name">Animal</span> <span class="token punctuation">{</span>
    age<span class="token operator">:</span> <span class="token builtin">number</span> <span class="token operator">=</span> <span class="token number">18</span>
<span class="token punctuation">}</span>
<span class="token keyword">let</span> getRandomObject <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token punctuation">(</span>Person <span class="token operator">|</span> Animal<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> value <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>value <span class="token operator">&gt;=</span> <span class="token number">0.5</span><span class="token punctuation">)</span> <span class="token operator">?</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token keyword">new</span> <span class="token class-name">Animal</span>
<span class="token punctuation">}</span>
<span class="token keyword">let</span> res <span class="token operator">=</span> <span class="token function">getRandomObject</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">if</span><span class="token punctuation">(</span>res <span class="token keyword">instanceof</span> <span class="token class-name">Person</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
   <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span>name<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token punctuation">{</span>
   <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span>age<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="_8-4-特殊类型"><a href="#_8-4-特殊类型" class="header-anchor">#</a> 8.4 特殊类型</h3> <h4 id="_1-空值检测"><a href="#_1-空值检测" class="header-anchor">#</a> 1. 空值检测</h4> <p>TS中有两种特殊的类型<code>null/undefined</code>，他们分别具有值<code>null/undefined</code></p> <ul><li>默认情况下我们可以将<code>null/undefined</code>赋值给任意类型</li> <li>默认情况下这两个类型也可以互相转换</li></ul> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">let</span> value1<span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> value2<span class="token operator">:</span> <span class="token keyword">undefined</span><span class="token punctuation">;</span>
value1 <span class="token operator">=</span> value2  <span class="token comment">// ok</span>
value2 <span class="token operator">=</span> value1  <span class="token comment">// ok</span>
<span class="token keyword">let</span> value3<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
value3 <span class="token operator">=</span> value1  <span class="token comment">// ok</span>
value3 <span class="token operator">=</span> value2  <span class="token comment">// ok</span>
</code></pre></div><p>在企业开发中，如果不想让<code>null/undefined</code>赋值给任意类型，或者不想让这两者相互转换，就可以开启<code>tsconfig.json</code>中的<code>strictNullChecks</code>选项，开启后之前的操作将会报错。</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
    <span class="token property">&quot;strictNullChecks&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="_2-空值检测下转换"><a href="#_2-空值检测下转换" class="header-anchor">#</a> 2. 空值检测下转换</h4> <p>如果我们在开启了<code>strictNullChecks</code>的前提下还想要将<code>null/undefined</code>赋值给任意类型，此时就需要用到来拟合类型</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">let</span> value<span class="token operator">:</span> <span class="token punctuation">(</span><span class="token builtin">number</span> <span class="token operator">|</span> <span class="token keyword">null</span> <span class="token operator">|</span> <span class="token keyword">undefined</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="_3-空值检查下的可选参数和可选属性"><a href="#_3-空值检查下的可选参数和可选属性" class="header-anchor">#</a> 3. 空值检查下的可选参数和可选属性</h4> <p>对于可选属性和可选参数来说，如果开启了<code>strictNullChecks</code>，那么默认情况下数据类型就是联合类型。</p> <p>是当前的类型 + <code>undefined</code></p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">class</span> <span class="token class-name">Person</span> <span class="token punctuation">{</span>
    name<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">string</span>  <span class="token comment">// 默认 name 的类型是 (string | undefined)</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">say</span><span class="token punctuation">(</span>name<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// name 也是 (number | undefined)</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="_4-去除-null-和-undefined-检测"><a href="#_4-去除-null-和-undefined-检测" class="header-anchor">#</a> 4. 去除 null 和 undefined 检测</h4> <p>可以使用<code>!</code>来去除 null 或 undefined 检测，意思就是该值一定不是 null 或 undefined</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">function</span> <span class="token function">getLength</span><span class="token punctuation">(</span>value<span class="token operator">:</span> <span class="token punctuation">(</span><span class="token builtin">string</span> <span class="token operator">|</span> <span class="token keyword">null</span> <span class="token operator">|</span> <span class="token keyword">undefined</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
   value <span class="token operator">=</span> <span class="token string">'abc'</span>
   <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
       <span class="token comment">// return value.length  // 报错，因为 null 和 undefined 没有 length 属性</span>
       <span class="token comment">// return (value || '').length; // 原生 JS 的写法</span>
       <span class="token comment">// return (value as string).length  // 使用类型断言</span>
       <span class="token keyword">return</span> value<span class="token operator">!</span><span class="token punctuation">.</span>length <span class="token comment">// 我们已知 value 一定是 string 类型的，所以可以使用类型断言的简写方式，加入 !</span>
   <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="_8-5-类型别名"><a href="#_8-5-类型别名" class="header-anchor">#</a> 8.5 类型别名</h3> <h4 id="_1-什么是类型别名"><a href="#_1-什么是类型别名" class="header-anchor">#</a> 1. 什么是类型别名</h4> <p>类型别名就是给类型起一个新名字，但是他们都代表同一种类型。</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token comment">// 给 string 起了一个类型别名叫做 myString</span>
<span class="token comment">// 无论是 myString 还是 string 都表示为 string</span>
<span class="token keyword">type</span> <span class="token class-name">myString</span> <span class="token operator">=</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> value<span class="token operator">:</span> myString<span class="token punctuation">;</span>

value <span class="token operator">=</span> <span class="token string">'134'</span>
value <span class="token operator">=</span> <span class="token number">134</span> <span class="token comment">// 报错</span>
</code></pre></div><h4 id="_2-类型别名用于泛型"><a href="#_2-类型别名用于泛型" class="header-anchor">#</a> 2. 类型别名用于泛型</h4> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">type</span> <span class="token class-name">MyType<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token punctuation">{</span> x<span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">,</span> y<span class="token operator">:</span><span class="token constant">T</span> <span class="token punctuation">}</span>
<span class="token keyword">let</span> value<span class="token operator">:</span> MyType<span class="token operator">&lt;</span><span class="token builtin">number</span><span class="token operator">&gt;</span><span class="token punctuation">;</span>
<span class="token comment">// 将来给 value 赋值必须是 {x，y}，并且必须都是 number 类型</span>
value <span class="token operator">=</span> <span class="token punctuation">{</span>
    x<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
    y<span class="token operator">:</span> <span class="token number">1</span>
<span class="token punctuation">}</span>

value <span class="token operator">=</span> <span class="token punctuation">{</span>
    x<span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
    y<span class="token operator">:</span> <span class="token string">'1'</span>
<span class="token punctuation">}</span><span class="token comment">// 报错</span>
</code></pre></div><h4 id="_3-在类型别名的属性中使用自己"><a href="#_3-在类型别名的属性中使用自己" class="header-anchor">#</a> 3. 在类型别名的属性中使用自己</h4> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token comment">// 这种用法一般用于定义一些嵌套、树状的结构</span>
<span class="token keyword">type</span> <span class="token class-name">MyType</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
    name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
    children<span class="token operator">?</span><span class="token operator">:</span> MyType <span class="token comment">// 这里需要变成可选的，不然将会循环嵌套，不会停止</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> value<span class="token operator">:</span> MyType <span class="token operator">=</span> <span class="token punctuation">{</span>
    name<span class="token operator">:</span> <span class="token string">'aa'</span><span class="token punctuation">,</span>
    children<span class="token operator">:</span> <span class="token punctuation">{</span>
        name<span class="token operator">:</span> <span class="token string">'bb'</span><span class="token punctuation">,</span>
        children<span class="token operator">:</span> <span class="token punctuation">{</span>
            name<span class="token operator">:</span> <span class="token string">'cc'</span>
            <span class="token comment">// ......</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="_4-接口和类型别名是相互兼容的"><a href="#_4-接口和类型别名是相互兼容的" class="header-anchor">#</a> 4. 接口和类型别名是相互兼容的</h4> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">type</span> <span class="token class-name">MyType</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
    name<span class="token operator">:</span> <span class="token builtin">string</span>
<span class="token punctuation">}</span>

<span class="token keyword">interface</span> <span class="token class-name">MyInterface</span> <span class="token punctuation">{</span>
    name<span class="token operator">:</span> <span class="token builtin">string</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> value1<span class="token operator">:</span> MyType <span class="token operator">=</span> <span class="token punctuation">{</span>name<span class="token operator">:</span> <span class="token string">'alex'</span><span class="token punctuation">}</span>
<span class="token keyword">let</span> value2<span class="token operator">:</span> MyInterface <span class="token operator">=</span> <span class="token punctuation">{</span>name<span class="token operator">:</span> <span class="token string">'tom'</span><span class="token punctuation">}</span>

value1 <span class="token operator">=</span> value2
value2 <span class="token operator">=</span> value1 <span class="token comment">// 如果这两个约束的类型一样，那么这两个就可以相互转换，即使一个是接口，一个是类型别名</span>
</code></pre></div><h4 id="_5-类型别名和接口的异同"><a href="#_5-类型别名和接口的异同" class="header-anchor">#</a> 5. 类型别名和接口的异同</h4> <h5 id="_1-都可以描述属性或方法"><a href="#_1-都可以描述属性或方法" class="header-anchor">#</a> 1. 都可以描述属性或方法</h5> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">type</span> <span class="token class-name">MyType</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
    name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
    <span class="token function">say</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span><span class="token keyword">void</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">interface</span> <span class="token class-name">MyInterface</span> <span class="token punctuation">{</span>
    name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
    <span class="token function">say</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h5 id="_2-都允许扩展"><a href="#_2-都允许扩展" class="header-anchor">#</a> 2. 都允许扩展</h5> <p>扩展接口</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">interface</span> <span class="token class-name">MyInterface</span> <span class="token punctuation">{</span>
    name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
    say<span class="token operator">:</span> <span class="token keyword">void</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">interface</span> <span class="token class-name">MyInterface2</span> <span class="token keyword">extends</span> <span class="token class-name">MyInterface</span> <span class="token punctuation">{</span>
    age<span class="token operator">:</span> <span class="token builtin">number</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> value<span class="token operator">:</span> MyInterface2 <span class="token operator">=</span> <span class="token punctuation">{</span>
    name<span class="token operator">:</span> <span class="token string">'aaa'</span><span class="token punctuation">,</span>
    age<span class="token operator">:</span> <span class="token number">18</span><span class="token punctuation">,</span>
    <span class="token function">say</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span> <span class="token punctuation">{</span>
        <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'aaa'</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>扩展类型别名</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">type</span> <span class="token class-name">MyType</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
    name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
    <span class="token function">say</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span><span class="token keyword">void</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">MyType2</span> <span class="token operator">=</span> MyType <span class="token operator">&amp;</span> <span class="token punctuation">{</span>
    age<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> value<span class="token operator">:</span> MyType2 <span class="token operator">=</span> <span class="token punctuation">{</span>
    name<span class="token operator">:</span> <span class="token string">'aaa'</span><span class="token punctuation">,</span>
    age<span class="token operator">:</span> <span class="token number">18</span><span class="token punctuation">,</span>
    <span class="token function">say</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span> <span class="token punctuation">{</span>
        <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'aaa'</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h5 id="_3-type-可以声明基本类名别名、联合类型、元组等类型-但接口不能"><a href="#_3-type-可以声明基本类名别名、联合类型、元组等类型-但接口不能" class="header-anchor">#</a> 3. type 可以声明基本类名别名、联合类型、元组等类型，但接口不能</h5> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">type</span> <span class="token class-name">MyType1</span> <span class="token operator">=</span> <span class="token builtin">boolean</span><span class="token punctuation">;</span>
<span class="token keyword">type</span> <span class="token class-name">MyType2</span> <span class="token operator">=</span> <span class="token builtin">string</span> <span class="token operator">|</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
<span class="token keyword">type</span> <span class="token class-name">MyType3</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token builtin">string</span><span class="token punctuation">,</span> <span class="token builtin">boolean</span><span class="token punctuation">,</span> <span class="token builtin">number</span><span class="token punctuation">]</span>
</code></pre></div><h5 id="_4-type-不会自动合并-接口会自动合并"><a href="#_4-type-不会自动合并-接口会自动合并" class="header-anchor">#</a> 4. type 不会自动合并，接口会自动合并</h5> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">interface</span> <span class="token class-name">MyInterface</span> <span class="token punctuation">{</span>
    age<span class="token operator">:</span> <span class="token builtin">number</span>
<span class="token punctuation">}</span>
<span class="token keyword">interface</span> <span class="token class-name">MyInterface</span> <span class="token punctuation">{</span>
    name<span class="token operator">:</span> <span class="token builtin">string</span>
<span class="token punctuation">}</span>
<span class="token comment">// 两个同名的接口会合并</span>
</code></pre></div><h3 id="_8-6-字面量类型"><a href="#_8-6-字面量类型" class="header-anchor">#</a> 8.6 字面量类型</h3> <h4 id="_1-什么是字面量"><a href="#_1-什么是字面量" class="header-anchor">#</a> 1. 什么是字面量</h4> <p>字面量就是源代码中的一个固定的值。</p> <p>例如数值字面量：1、2、3</p> <p>字符串字面量：'a'、'abc'</p> <h4 id="_2-ts中的字面量类型"><a href="#_2-ts中的字面量类型" class="header-anchor">#</a> 2. TS中的字面量类型</h4> <p>在 TS 中我们可以使用字面量作为具体的类型使用，当使用字面量作为具体类型时，该类型的取值就必须是字面量的值。</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">type</span> <span class="token class-name">MyNum</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> value<span class="token operator">:</span>MyNum <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
value <span class="token operator">=</span> <span class="token number">2</span> <span class="token comment">// 报错</span>
</code></pre></div><h3 id="_8-7-可辨识联合"><a href="#_8-7-可辨识联合" class="header-anchor">#</a> 8.7 可辨识联合</h3> <h4 id="_1-什么是可辨识联合"><a href="#_1-什么是可辨识联合" class="header-anchor">#</a> 1. 什么是可辨识联合</h4> <p>具有共同的可辨识特征。一个类型别名，包含了具有共同的可辨识特征的类型和联合</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">interface</span> <span class="token class-name">Square</span> <span class="token punctuation">{</span>
    kind<span class="token operator">:</span> <span class="token string">'square'</span><span class="token punctuation">;</span>
    size<span class="token operator">:</span> <span class="token builtin">number</span>
<span class="token punctuation">}</span>

<span class="token keyword">interface</span> <span class="token class-name">Rectangle</span> <span class="token punctuation">{</span>
    kind<span class="token operator">:</span> <span class="token string">'rectangle'</span><span class="token punctuation">;</span>
    width<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
    height<span class="token operator">:</span> <span class="token builtin">number</span>
<span class="token punctuation">}</span>

<span class="token keyword">interface</span> <span class="token class-name">Circle</span> <span class="token punctuation">{</span>
    kind<span class="token operator">:</span> <span class="token string">'circle'</span><span class="token punctuation">;</span>
    radius<span class="token operator">:</span> <span class="token builtin">number</span>
<span class="token punctuation">}</span>
</code></pre></div><p>以上三个接口都有一个共同点，那就是他们都有一个属性<code>kind</code>，kind就是<code>共同的可辨识特征</code></p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token comment">// shape 就是一个可辨识的联合，因为它的取值就是一个联合，因为联合的每一个值都有一个共同的可辨识特征</span>
<span class="token keyword">type</span> <span class="token class-name">Shape</span> <span class="token operator">=</span> <span class="token punctuation">(</span>Square <span class="token operator">|</span> Rectangle <span class="token operator">|</span> Circle<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">area</span><span class="token punctuation">(</span>s<span class="token operator">:</span> Shape<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">swicth</span><span class="token punctuation">(</span>s<span class="token punctuation">.</span>kind<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">case</span> <span class="token string">&quot;square&quot;</span><span class="token operator">:</span> <span class="token keyword">return</span> s<span class="token punctuation">.</span>size <span class="token operator">*</span> s<span class="token punctuation">.</span>size<span class="token punctuation">;</span>
        <span class="token keyword">case</span> <span class="token string">&quot;rectangle&quot;</span><span class="token operator">:</span> <span class="token keyword">return</span> s<span class="token punctuation">.</span>width <span class="token operator">*</span> s<span class="token punctuation">.</span>height<span class="token punctuation">;</span>
        <span class="token keyword">case</span> <span class="token string">&quot;circle&quot;</span><span class="token operator">:</span> <span class="token keyword">return</span> Math<span class="token punctuation">.</span>Pi <span class="token operator">*</span> s<span class="token punctuation">.</span>radius <span class="token operator">**</span> <span class="token number">2</span><span class="token punctuation">;</span> <span class="token comment">// ** 是 ES 7 的幂运算符</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="_2-可辨识联合完整性检查"><a href="#_2-可辨识联合完整性检查" class="header-anchor">#</a> 2. 可辨识联合完整性检查</h4> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">function</span> <span class="token function">area</span><span class="token punctuation">(</span>s<span class="token operator">:</span> Shape<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">swicth</span><span class="token punctuation">(</span>s<span class="token punctuation">.</span>kind<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">case</span> <span class="token string">&quot;square&quot;</span><span class="token operator">:</span> <span class="token keyword">return</span> s<span class="token punctuation">.</span>size <span class="token operator">*</span> s<span class="token punctuation">.</span>size<span class="token punctuation">;</span>
        <span class="token comment">// case &quot;rectangle&quot;: return s.width * s.height;</span>
        <span class="token keyword">case</span> <span class="token string">&quot;circle&quot;</span><span class="token operator">:</span> <span class="token keyword">return</span> Math<span class="token punctuation">.</span>Pi <span class="token operator">*</span> s<span class="token punctuation">.</span>radius <span class="token operator">**</span> <span class="token number">2</span><span class="token punctuation">;</span> <span class="token comment">// ** 是 ES 7 的幂运算符</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><blockquote><p>在企业开发中，如果我们想要对可辨识联合进行完整性检查，有两种方式：</p> <p>方式一：</p> <ul><li>对函数加入返回值</li> <li>打开<code>strictNullChecks</code></li></ul> <p>方式二：</p> <ul><li>添加 default</li> <li>添加 never</li></ul></blockquote> <h5 id="方式一"><a href="#方式一" class="header-anchor">#</a> 方式一：</h5> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token comment">// 加入返回值 number</span>
<span class="token keyword">function</span> <span class="token function">area</span><span class="token punctuation">(</span>s<span class="token operator">:</span> Shape<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">number</span> <span class="token punctuation">{</span>
    <span class="token function">swicth</span><span class="token punctuation">(</span>s<span class="token punctuation">.</span>kind<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">case</span> <span class="token string">&quot;square&quot;</span><span class="token operator">:</span> <span class="token keyword">return</span> s<span class="token punctuation">.</span>size <span class="token operator">*</span> s<span class="token punctuation">.</span>size<span class="token punctuation">;</span>
        <span class="token keyword">case</span> <span class="token string">&quot;rectangle&quot;</span><span class="token operator">:</span> <span class="token keyword">return</span> s<span class="token punctuation">.</span>width <span class="token operator">*</span> s<span class="token punctuation">.</span>height<span class="token punctuation">;</span>
        <span class="token keyword">case</span> <span class="token string">&quot;circle&quot;</span><span class="token operator">:</span> <span class="token keyword">return</span> Math<span class="token punctuation">.</span>Pi <span class="token operator">*</span> s<span class="token punctuation">.</span>radius <span class="token operator">**</span> <span class="token number">2</span><span class="token punctuation">;</span> <span class="token comment">// ** 是 ES 7 的幂运算符</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>将<code>tsconfig.json</code>中的<code>strictNullChecks</code>选项打开</p> <h5 id="方式二"><a href="#方式二" class="header-anchor">#</a> 方式二：</h5> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">function</span> <span class="token function">MyNever</span><span class="token punctuation">(</span>x<span class="token operator">:</span> <span class="token builtin">never</span><span class="token punctuation">)</span><span class="token operator">:</span><span class="token builtin">never</span> <span class="token punctuation">{</span>
    <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">'可辨识联合处理不完整'</span> <span class="token operator">+</span> x<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">area</span><span class="token punctuation">(</span>s<span class="token operator">:</span> Shape<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">swicth</span><span class="token punctuation">(</span>s<span class="token punctuation">.</span>kind<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">case</span> <span class="token string">&quot;square&quot;</span><span class="token operator">:</span> <span class="token keyword">return</span> s<span class="token punctuation">.</span>size <span class="token operator">*</span> s<span class="token punctuation">.</span>size<span class="token punctuation">;</span>
        <span class="token keyword">case</span> <span class="token string">&quot;rectangle&quot;</span><span class="token operator">:</span> <span class="token keyword">return</span> s<span class="token punctuation">.</span>width <span class="token operator">*</span> s<span class="token punctuation">.</span>height<span class="token punctuation">;</span>
        <span class="token keyword">case</span> <span class="token string">&quot;circle&quot;</span><span class="token operator">:</span> <span class="token keyword">return</span> Math<span class="token punctuation">.</span>Pi <span class="token operator">*</span> s<span class="token punctuation">.</span>radius <span class="token operator">**</span> <span class="token number">2</span><span class="token punctuation">;</span> <span class="token comment">// ** 是 ES 7 的幂运算符</span>
        <span class="token keyword">default</span><span class="token operator">:</span> <span class="token keyword">return</span> <span class="token function">MyNever</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id=""><a href="#" class="header-anchor">#</a></h4> <h1 id="_9-ts-高级"><a href="#_9-ts-高级" class="header-anchor">#</a> 9. TS 高级</h1> <h3 id="_9-1-索引访问符"><a href="#_9-1-索引访问符" class="header-anchor">#</a> 9.1 索引访问符</h3> <p>通过<code>[]</code>索引访问符，我们就能得到某个索引的类型。</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">class</span> <span class="token class-name">Person</span> <span class="token punctuation">{</span>
    name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
    age<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">// 此时 MyType 就是 string 类型的</span>
<span class="token keyword">type</span> <span class="token class-name">MyType</span> <span class="token operator">=</span> Person<span class="token punctuation">[</span><span class="token string">&quot;name&quot;</span><span class="token punctuation">]</span>
</code></pre></div><h4 id="_1-应用场景"><a href="#_1-应用场景" class="header-anchor">#</a> 1. 应用场景</h4> <p>需求：获取指定对象，部分属性的值，放到数组中返回</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">let</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>
   name<span class="token operator">:</span> <span class="token string">'alex'</span><span class="token punctuation">,</span>
   age<span class="token operator">:</span> <span class="token number">18</span><span class="token punctuation">,</span>
   gender<span class="token operator">:</span> <span class="token boolean">true</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token generic-function"><span class="token function">getValues</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token constant">T</span><span class="token punctuation">,</span> <span class="token constant">K</span> <span class="token keyword">extends</span> <span class="token keyword">keyof</span> <span class="token constant">T</span><span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>obj<span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">;</span> keys<span class="token operator">:</span> <span class="token constant">K</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">[</span><span class="token constant">K</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token keyword">as</span> <span class="token constant">T</span><span class="token punctuation">[</span><span class="token constant">K</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token punctuation">]</span>
    keys<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span>key <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        arr<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>obj<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> arr
<span class="token punctuation">}</span>

<span class="token keyword">let</span> res <span class="token operator">=</span> <span class="token function">getValues</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> keys<span class="token punctuation">[</span><span class="token string">'name, age'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>

<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span>  <span class="token comment">// [alex, 18]</span>
</code></pre></div><h4 id="_2-注意点"><a href="#_2-注意点" class="header-anchor">#</a> 2. 注意点</h4> <p>不能返回 null/undefined/never 类型</p> <h3 id="_9-2-映射类型"><a href="#_9-2-映射类型" class="header-anchor">#</a> 9.2 映射类型</h3> <h4 id="_1-什么是映射类型"><a href="#_1-什么是映射类型" class="header-anchor">#</a> 1. 什么是映射类型</h4> <p>根据旧的类型创建出新的类型，我们称之为映射类型</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">interface</span> <span class="token class-name">TestInterface</span> <span class="token punctuation">{</span>
	name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
    age<span class="token operator">:</span> <span class="token builtin">number</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">ReadOnlyTestInterface<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token comment">// 作用是遍历出指定类型所有的key，添加到当前对象上</span>
    <span class="token keyword">readonly</span> <span class="token punctuation">[</span><span class="token constant">P</span> <span class="token keyword">in</span> <span class="token keyword">keyof</span> <span class="token constant">T</span><span class="token punctuation">]</span><span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">[</span><span class="token constant">P</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">MyType</span> <span class="token operator">=</span> ReadOnlyTestInterface<span class="token operator">&lt;</span>TestInterface<span class="token operator">&gt;</span>
</code></pre></div><p>当然，不仅可以添加某个约束，还可以删除某个约束</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">interface</span> <span class="token class-name">TestInterface</span> <span class="token punctuation">{</span>
	<span class="token keyword">readonly</span> name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
    <span class="token keyword">readonly</span> age<span class="token operator">:</span> <span class="token builtin">number</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">ReadOnlyTestInterface<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token comment">// - 减号表示删除此约束， + 加号表示增加</span>
    <span class="token operator">-</span><span class="token keyword">readonly</span> <span class="token punctuation">[</span><span class="token constant">P</span> <span class="token keyword">in</span> <span class="token keyword">keyof</span> <span class="token constant">T</span><span class="token punctuation">]</span><span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">[</span><span class="token constant">P</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">MyType</span> <span class="token operator">=</span> ReadOnlyTestInterface<span class="token operator">&lt;</span>TestInterface<span class="token operator">&gt;</span>
</code></pre></div><p>由于生成可读属性和可选属性的操作比较常见，因此 TS 内部封装了</p> <p><code>ReadOnly/Partial</code></p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">interface</span> <span class="token class-name">TestInterface</span> <span class="token punctuation">{</span>
	name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
    age<span class="token operator">:</span> <span class="token builtin">number</span>
<span class="token punctuation">}</span>

<span class="token comment">// 全部变成可读了</span>
<span class="token keyword">type</span> <span class="token class-name">MyType</span> <span class="token operator">=</span> ReadOnly<span class="token operator">&lt;</span>TestInterface<span class="token operator">&gt;</span>
<span class="token comment">// 全部变成可选了</span>
<span class="token keyword">type</span> <span class="token class-name">MyType2</span> <span class="token operator">=</span> Partial<span class="token operator">&lt;</span>TestInterface<span class="token operator">&gt;</span>
<span class="token comment">// 变成可选可读了</span>
<span class="token keyword">type</span> <span class="token class-name">MyType3</span> <span class="token operator">=</span> Partial<span class="token operator">&lt;</span>ReadOnly<span class="token operator">&lt;</span>TestInterface<span class="token operator">&gt;&gt;</span>
</code></pre></div><h4 id="_2-pick-映射类型"><a href="#_2-pick-映射类型" class="header-anchor">#</a> 2. Pick 映射类型</h4> <p>将原有的类型的部分内容映射到新类型中</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">interface</span> <span class="token class-name">TestInterface</span> <span class="token punctuation">{</span>
	name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
    age<span class="token operator">:</span> <span class="token builtin">number</span>
<span class="token punctuation">}</span>

<span class="token comment">// 传入 name 只映射 name</span>
<span class="token keyword">type</span> <span class="token class-name">MyType</span> <span class="token operator">=</span> Pick<span class="token operator">&lt;</span>TestInterface<span class="token punctuation">,</span> <span class="token string">'name'</span><span class="token operator">&gt;</span>
</code></pre></div><h4 id="_3-record-映射类型"><a href="#_3-record-映射类型" class="header-anchor">#</a> 3. Record 映射类型</h4> <p>将一个类型的所有属性映射到另一个类型上，并创建一个新的类型</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">type</span> <span class="token class-name">Animal</span> <span class="token operator">=</span> <span class="token string">'person'</span> <span class="token operator">|</span> <span class="token string">'dog'</span> <span class="token operator">|</span> <span class="token string">'cat'</span>

<span class="token keyword">interface</span> <span class="token class-name">TestInterface</span> <span class="token punctuation">{</span>
	name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
    age<span class="token operator">:</span> <span class="token builtin">number</span>
<span class="token punctuation">}</span>

<span class="token comment">// 会映射出一个新的类型，大概长👇这样</span>

<span class="token comment">/*
  {
  	person: {
  		name: string,
  		age: number,
  	}
  	dog: {
  		name: string,
  		age: number
  	}
  	cat: {
  		name: string,
  		age: number
  	}
  }
*/</span>
<span class="token keyword">type</span> <span class="token class-name">MyType</span> <span class="token operator">=</span> Record<span class="token operator">&lt;</span>Animal<span class="token punctuation">,</span> TestInterface<span class="token operator">&gt;</span>

<span class="token keyword">let</span> res<span class="token operator">:</span>MyType <span class="token operator">=</span> <span class="token punctuation">{</span>
    person<span class="token operator">:</span> <span class="token punctuation">{</span>
        name<span class="token operator">:</span> <span class="token string">'xx'</span><span class="token punctuation">,</span>
        age<span class="token operator">:</span> <span class="token number">18</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    dog<span class="token operator">:</span> <span class="token punctuation">{</span>
        name<span class="token operator">:</span> <span class="token string">'aa'</span><span class="token punctuation">,</span>
        age<span class="token operator">:</span> <span class="token number">3</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    cat<span class="token operator">:</span> <span class="token punctuation">{</span>
        name<span class="token operator">:</span> <span class="token string">'bb'</span><span class="token punctuation">,</span>
        age<span class="token operator">:</span> <span class="token number">1</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="_4-由映射类型进行推断"><a href="#_4-由映射类型进行推断" class="header-anchor">#</a> 4. 由映射类型进行推断</h4> <p>对于<code>Readonly</code>、<code>Partial</code>、<code>Pick</code>的映射类型，我们可以对映射之后的类型进行拆包。还原映射之前的类型，这种操作我们称之为拆包</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">interface</span> <span class="token class-name">TestInterface</span> <span class="token punctuation">{</span>
	name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
    age<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">TestType<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token operator">+</span><span class="token keyword">readonly</span> <span class="token punctuation">[</span><span class="token constant">P</span> <span class="token keyword">in</span> <span class="token keyword">keyof</span> <span class="token constant">T</span><span class="token punctuation">]</span><span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">[</span><span class="token constant">P</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
<span class="token comment">// 此时 test 就是一个只读的映射类型</span>
<span class="token keyword">type</span> <span class="token class-name">test</span> <span class="token operator">=</span> TestType<span class="token operator">&lt;</span>TestInterface<span class="token operator">&gt;</span>

<span class="token comment">// 那么我们该如何还原回去呢？</span>
<span class="token keyword">type</span> <span class="token class-name">UnType<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token operator">-</span><span class="token keyword">readonly</span> <span class="token punctuation">[</span><span class="token constant">P</span> <span class="token keyword">in</span> <span class="token keyword">keyof</span> <span class="token constant">T</span><span class="token punctuation">]</span><span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">[</span><span class="token constant">P</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
<span class="token comment">// 此时 test2 就是拆包后的</span>
<span class="token keyword">type</span> <span class="token class-name">test2</span> <span class="token operator">=</span> UnType<span class="token operator">&lt;</span>test<span class="token operator">&gt;</span>
</code></pre></div><h3 id="_9-3-条件类型"><a href="#_9-3-条件类型" class="header-anchor">#</a> 9.3 条件类型</h3> <p>判断前面的一个类型是否是后面一个类型或者继承于后面一个类型</p> <p>如果是就返回第一个结果，如果不是就返回第二个结果</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token class-name"><span class="token constant">U</span></span> <span class="token operator">?</span> <span class="token constant">X</span> <span class="token operator">:</span> <span class="token constant">Y</span>
</code></pre></div><div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">type</span> <span class="token class-name">MyType<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token class-name"><span class="token builtin">string</span></span> <span class="token operator">?</span> <span class="token builtin">string</span> <span class="token operator">:</span> <span class="token builtin">any</span>
<span class="token comment">// 此时 res 是 string 类型</span>
<span class="token keyword">type</span> <span class="token class-name">res</span> <span class="token operator">=</span> MyType<span class="token operator">&lt;</span><span class="token builtin">string</span><span class="token operator">&gt;</span>
<span class="token comment">// 此时 res2 是 boolean 类型</span>
<span class="token keyword">type</span> <span class="token class-name">res2</span> <span class="token operator">=</span> MyType<span class="token operator">&lt;</span><span class="token builtin">boolean</span><span class="token operator">&gt;</span>
</code></pre></div><h4 id="_1-infer-关键字"><a href="#_1-infer-关键字" class="header-anchor">#</a> 1. infer 关键字</h4> <p>条件类型提供了一个<code>infer</code>关键字，可以让我们在条件类型中定义新的类型。</p> <p>需求：定义一个类型，如果传入的是数组，就返回数组的元素类型，如果传入的是普通类型，则直接返回此类型。</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">type</span> <span class="token class-name">MyType<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token class-name"><span class="token builtin">any</span></span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">?</span> <span class="token constant">T</span><span class="token punctuation">[</span><span class="token builtin">number</span><span class="token punctuation">]</span> <span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">;</span>
<span class="token keyword">type</span> <span class="token class-name">res</span> <span class="token operator">=</span> MyType<span class="token operator">&lt;</span><span class="token builtin">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">&gt;</span>  <span class="token comment">//  -&gt; string</span>
<span class="token keyword">type</span> <span class="token class-name">re2</span> <span class="token operator">=</span> MyType<span class="token operator">&lt;</span><span class="token builtin">number</span><span class="token operator">&gt;</span>    <span class="token comment">//  -&gt; number</span>
</code></pre></div><p>使用<code>infer</code></p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token comment">// infer U 此时的 U 其实就是每一个数组元素的类型</span>
<span class="token keyword">type</span> <span class="token class-name">MyType<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token class-name"><span class="token builtin">Array</span><span class="token operator">&lt;</span><span class="token keyword">infer</span> <span class="token constant">U</span><span class="token operator">&gt;</span></span> <span class="token operator">?</span> <span class="token constant">U</span> <span class="token operator">:</span> <span class="token constant">T</span>
</code></pre></div><h3 id="_9-4-分布式条件类型"><a href="#_9-4-分布式条件类型" class="header-anchor">#</a> 9.4 分布式条件类型</h3> <p>被检测类型是一个联合类型的时候，该条件类型就被称之为分布式条件类型</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">type</span> <span class="token class-name">MyType<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token class-name"><span class="token builtin">any</span></span> <span class="token operator">?</span> <span class="token constant">T</span> <span class="token operator">:</span> <span class="token builtin">never</span>
<span class="token comment">// 被检测类型是一个联合类型，就是一个分布式联合类型</span>
<span class="token comment">// 返回一个所有符合条件的集合</span>
<span class="token comment">// string number boolean 都符合 any 那么就返回这三个的联合类型</span>
<span class="token keyword">type</span> <span class="token class-name">res</span> <span class="token operator">=</span> MyType<span class="token operator">&lt;</span><span class="token builtin">string</span> <span class="token operator">|</span> <span class="token builtin">number</span> <span class="token operator">|</span> <span class="token builtin">boolean</span><span class="token operator">&gt;</span>
</code></pre></div><h4 id="应用场景"><a href="#应用场景" class="header-anchor">#</a> 应用场景</h4> <h5 id="从-t-中剔除可以赋值给-u-的类型"><a href="#从-t-中剔除可以赋值给-u-的类型" class="header-anchor">#</a> 从 T 中剔除可以赋值给 U 的类型</h5> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">type</span> <span class="token class-name">MyType<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token punctuation">,</span> <span class="token constant">U</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token class-name"><span class="token constant">U</span></span> <span class="token operator">?</span> <span class="token builtin">never</span> <span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">;</span>
<span class="token comment">// 这样就剔除了 number</span>
<span class="token keyword">type</span> <span class="token class-name">res</span> <span class="token operator">=</span> MyType<span class="token operator">&lt;</span><span class="token builtin">string</span> <span class="token operator">|</span> <span class="token builtin">number</span> <span class="token operator">|</span> <span class="token builtin">boolean</span><span class="token punctuation">,</span> <span class="token builtin">number</span><span class="token operator">&gt;</span>
</code></pre></div><p>由于这种操作很常见，所以 TS 内部封装了 <code>Exclude</code></p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">type</span> <span class="token class-name">res</span> <span class="token operator">=</span> Exclude<span class="token operator">&lt;</span><span class="token builtin">string</span> <span class="token operator">|</span> <span class="token builtin">number</span> <span class="token operator">|</span> <span class="token builtin">boolean</span><span class="token punctuation">,</span> <span class="token builtin">number</span><span class="token operator">&gt;</span>
</code></pre></div><h5 id="提取-t-中可以赋值给-u-的类型"><a href="#提取-t-中可以赋值给-u-的类型" class="header-anchor">#</a> 提取 T 中可以赋值给 U 的类型</h5> <p>TS 内部封装了 <code>Extract</code></p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token comment">// 只拿到 number 和 string</span>
<span class="token keyword">type</span> <span class="token class-name">res</span> <span class="token operator">=</span> Extract<span class="token operator">&lt;</span><span class="token builtin">string</span> <span class="token operator">|</span> <span class="token builtin">number</span> <span class="token operator">|</span> <span class="token builtin">boolean</span><span class="token punctuation">,</span> <span class="token builtin">number</span> <span class="token operator">|</span> <span class="token builtin">string</span><span class="token operator">&gt;</span>
</code></pre></div><h5 id="剔除-t-中的-null和undefined"><a href="#剔除-t-中的-null和undefined" class="header-anchor">#</a> 剔除 T 中的 null和undefined</h5> <p>TS 内部封装了 <code>NonNullable</code></p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token comment">// 只接收一个参数，自动把 null 和 undefined 剔除</span>
<span class="token keyword">type</span> <span class="token class-name">res</span> <span class="token operator">=</span> NonNullable<span class="token operator">&lt;</span><span class="token builtin">string</span> <span class="token operator">|</span> <span class="token keyword">null</span> <span class="token operator">|</span> <span class="token keyword">undefined</span> <span class="token operator">|</span> <span class="token builtin">boolean</span><span class="token operator">&gt;</span>
</code></pre></div><h5 id="获取函数的返回值类型"><a href="#获取函数的返回值类型" class="header-anchor">#</a> 获取函数的返回值类型</h5> <p>TS 内部封装了 <code>ReturnType</code></p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token comment">// 获取到返回值类型时 string</span>
<span class="token keyword">type</span> <span class="token class-name">res</span> <span class="token operator">=</span> ReturnType<span class="token operator">&lt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token builtin">string</span><span class="token operator">&gt;</span>
</code></pre></div><h5 id="获取一个类构造函数参数组成的元组类型"><a href="#获取一个类构造函数参数组成的元组类型" class="header-anchor">#</a> 获取一个类构造函数参数组成的元组类型</h5> <p>TS 内部封装了 <code>ConstructorParameters</code></p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">class</span> <span class="token class-name">Person</span> <span class="token punctuation">{</span>
    <span class="token function">constructor</span><span class="token punctuation">(</span>name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span> age<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">// 返回一个构造函数参数组成的元素 type res = [string, number]</span>
<span class="token keyword">type</span> <span class="token class-name">res</span> <span class="token operator">=</span> ConstructorParameters<span class="token operator">&lt;</span><span class="token keyword">typeof</span> Person<span class="token operator">&gt;</span><span class="token punctuation">;</span>
</code></pre></div><h5 id="获取函数的参数类型组成的元组类型"><a href="#获取函数的参数类型组成的元组类型" class="header-anchor">#</a> 获取函数的参数类型组成的元组类型</h5> <p>TS 内部封装了 <code>Parameters</code></p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">function</span> <span class="token function">say</span><span class="token punctuation">(</span>name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span>age<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">,</span> gender<span class="token operator">:</span> <span class="token builtin">boolean</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token comment">// type res = [string, number, boolean]</span>
<span class="token keyword">type</span> <span class="token class-name">res</span> <span class="token operator">=</span> Parameters<span class="token operator">&lt;</span><span class="token keyword">typeof</span> say<span class="token operator">&gt;</span>
</code></pre></div><h3 id="_9-5-unknown-类型"><a href="#_9-5-unknown-类型" class="header-anchor">#</a> 9.5 unknown 类型</h3> <h4 id="_1-什么是-unknown-类型"><a href="#_1-什么是-unknown-类型" class="header-anchor">#</a> 1. 什么是 unknown 类型</h4> <p><code>unknown</code>类型是 TS 3.0 新增的一个顶级类型，被称为安全的 any</p> <h4 id="_2-任何类型都可以赋值为-unknown-类型"><a href="#_2-任何类型都可以赋值为-unknown-类型" class="header-anchor">#</a> 2. 任何类型都可以赋值为 unknown 类型</h4> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">let</span> value<span class="token operator">:</span><span class="token builtin">unknown</span><span class="token punctuation">;</span>
value <span class="token operator">=</span> <span class="token number">123</span>
value <span class="token operator">=</span> <span class="token string">'abc'</span>
value <span class="token operator">=</span> <span class="token boolean">false</span>
</code></pre></div><h4 id="_3-如果没有进行类型断言或基于控制流的类型细化-不能将-unknown-赋值给其他类型"><a href="#_3-如果没有进行类型断言或基于控制流的类型细化-不能将-unknown-赋值给其他类型" class="header-anchor">#</a> 3. 如果没有进行类型断言或基于控制流的类型细化，不能将 unknown 赋值给其他类型</h4> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">let</span> value1<span class="token operator">:</span> <span class="token builtin">unknown</span> <span class="token operator">=</span> <span class="token number">123</span>
<span class="token keyword">let</span> value2<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>

<span class="token comment">// value2 = value1  // 报错</span>
value2 <span class="token operator">=</span> value1 <span class="token keyword">as</span> <span class="token builtin">number</span><span class="token punctuation">;</span> <span class="token comment">// 要么进行类型断言</span>
<span class="token comment">// 要么进行流程控制的类型细化</span>
<span class="token keyword">if</span><span class="token punctuation">(</span><span class="token keyword">typeof</span> value1 <span class="token operator">===</span> <span class="token string">'number'</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
	value2 <span class="token operator">=</span> value1   
<span class="token punctuation">}</span>
</code></pre></div><h4 id="_4-如果没有进行类型断言或基于控制流的类型细化-不能在-unknown-上进行任何操作"><a href="#_4-如果没有进行类型断言或基于控制流的类型细化-不能在-unknown-上进行任何操作" class="header-anchor">#</a> 4. 如果没有进行类型断言或基于控制流的类型细化，不能在 unknown 上进行任何操作</h4> <div class="language-TS extra-class"><pre class="language-ts"><code><span class="token keyword">let</span> value1<span class="token operator">:</span> <span class="token builtin">unknown</span> <span class="token operator">=</span> <span class="token number">123</span><span class="token punctuation">;</span>
value1<span class="token operator">++</span> <span class="token comment">// 报错</span>
<span class="token punctuation">(</span>value1 <span class="token keyword">as</span> <span class="token builtin">number</span><span class="token punctuation">)</span><span class="token operator">++</span>
<span class="token keyword">if</span><span class="token punctuation">(</span><span class="token keyword">typeof</span> value1 <span class="token operator">===</span> <span class="token string">'number'</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
	value1<span class="token operator">++</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="_5-只能对-unknown-类型进行相等或不等操作-不能进行其他操作-因为其他操作没有意义"><a href="#_5-只能对-unknown-类型进行相等或不等操作-不能进行其他操作-因为其他操作没有意义" class="header-anchor">#</a> 5. 只能对 unknown 类型进行相等或不等操作，不能进行其他操作（因为其他操作没有意义）</h4> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">let</span> value1<span class="token operator">:</span> <span class="token builtin">unknown</span> <span class="token operator">=</span> <span class="token number">123</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> value2<span class="token operator">:</span> <span class="token builtin">unknown</span> <span class="token operator">=</span> <span class="token number">123</span><span class="token punctuation">;</span>

<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>value1 <span class="token operator">===</span> value2<span class="token punctuation">)</span>
<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>value1 <span class="token operator">!==</span> value2<span class="token punctuation">)</span>
<span class="token comment">// 但是 tsconfig.json 开启 strict 严格模式下会报错</span>
<span class="token comment">// console.log(value1 &gt;= value2) // 虽然不会报错，但是不推荐</span>
</code></pre></div><h4 id="_6-unknown-与其他类型组成的交叉类型最后都是其他类型"><a href="#_6-unknown-与其他类型组成的交叉类型最后都是其他类型" class="header-anchor">#</a> 6. unknown 与其他类型组成的交叉类型最后都是其他类型</h4> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">type</span> <span class="token class-name">MyType</span> <span class="token operator">=</span> <span class="token builtin">number</span> <span class="token operator">&amp;</span> <span class="token builtin">unknown</span><span class="token punctuation">;</span>  <span class="token comment">// number 类型</span>
<span class="token keyword">type</span> <span class="token class-name">MyType2</span> <span class="token operator">=</span> <span class="token builtin">unknown</span> <span class="token operator">&amp;</span> <span class="token builtin">string</span><span class="token punctuation">;</span> <span class="token comment">// string 类型</span>
</code></pre></div><h4 id="_7-unknown-除了与-any-之外-与其他类型的联合类型都是-unknown-类型"><a href="#_7-unknown-除了与-any-之外-与其他类型的联合类型都是-unknown-类型" class="header-anchor">#</a> 7. unknown 除了与 any 之外，与其他类型的联合类型都是 unknown 类型</h4> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">type</span> <span class="token class-name">MyType</span> <span class="token operator">=</span> <span class="token builtin">unknown</span> <span class="token operator">|</span> <span class="token builtin">string</span> <span class="token operator">|</span> <span class="token builtin">boolean</span><span class="token punctuation">;</span> <span class="token comment">// unknown</span>
</code></pre></div><h4 id="_8-never-是-unknown-的子类型"><a href="#_8-never-是-unknown-的子类型" class="header-anchor">#</a> 8. never 是 unknown 的子类型</h4> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">type</span> <span class="token class-name">MyType</span> <span class="token operator">=</span> <span class="token builtin">never</span> exntends <span class="token builtin">unknown</span> <span class="token operator">?</span> <span class="token builtin">string</span> <span class="token operator">:</span> <span class="token builtin">number</span>  <span class="token comment">// string</span>
</code></pre></div><h4 id="_9-keyof-unknown-等于-never"><a href="#_9-keyof-unknown-等于-never" class="header-anchor">#</a> 9. keyof unknown 等于 never</h4> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">type</span> <span class="token class-name">MyType</span> <span class="token operator">=</span> <span class="token keyword">keyof</span> <span class="token builtin">unknown</span><span class="token punctuation">;</span>  <span class="token comment">// never</span>
</code></pre></div><h4 id="_10-unknown-类型的值不能直接访问属性、方法、创建实例"><a href="#_10-unknown-类型的值不能直接访问属性、方法、创建实例" class="header-anchor">#</a> 10. unknown 类型的值不能直接访问属性、方法、创建实例</h4> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">class</span> <span class="token class-name">Person</span> <span class="token punctuation">{</span>
    name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
    <span class="token function">say</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span><span class="token keyword">void</span> <span class="token punctuation">{</span>
        <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">name=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">// 报错</span>
<span class="token keyword">let</span> p<span class="token operator">:</span> <span class="token builtin">unknown</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token string">'aa'</span><span class="token punctuation">)</span>
</code></pre></div><h4 id="_11-使用映射类型时-如果遍历的是-unknown-类型-那么就不会映射任何类型"><a href="#_11-使用映射类型时-如果遍历的是-unknown-类型-那么就不会映射任何类型" class="header-anchor">#</a> 11. 使用映射类型时，如果遍历的是 unknown 类型，那么就不会映射任何类型</h4> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">type</span> <span class="token class-name">MyType<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token punctuation">[</span><span class="token constant">P</span> <span class="token keyword">in</span> <span class="token keyword">keyof</span> <span class="token constant">T</span><span class="token punctuation">]</span><span class="token operator">:</span> <span class="token builtin">any</span>
<span class="token punctuation">}</span>
<span class="token keyword">type</span> <span class="token class-name">res</span> <span class="token operator">=</span> MyType<span class="token operator">&lt;</span><span class="token builtin">number</span><span class="token operator">&gt;</span>  <span class="token comment">// number</span>
<span class="token keyword">type</span> <span class="token class-name">res2</span> <span class="token operator">=</span> MyType<span class="token operator">&lt;</span><span class="token builtin">unknown</span><span class="token operator">&gt;</span> <span class="token comment">// 空的</span>
</code></pre></div><h3 id="_9-6-symbol-类型"><a href="#_9-6-symbol-类型" class="header-anchor">#</a> 9.6 Symbol 类型</h3> <p>和 ES6 中的 Symbol 一样</p> <h4 id="_1-什么是-symbol"><a href="#_1-什么是-symbol" class="header-anchor">#</a> 1. 什么是 Symbol</h4> <p>Symbol 是 ES6 中新增的一种数据类型，被划分到了基本数据类型中。</p> <p>基本数据类型：string、number、boolean、undefined、null、Symbol</p> <p>引用数据类型：Object</p> <h4 id="_2-symbol-的作用"><a href="#_2-symbol-的作用" class="header-anchor">#</a> 2. Symbol 的作用</h4> <p>用来表示一个独一无二的值</p> <h4 id="_3-如何生成一个独一无二的值"><a href="#_3-如何生成一个独一无二的值" class="header-anchor">#</a> 3. 如何生成一个独一无二的值</h4> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">let</span> xxx <span class="token operator">=</span> <span class="token function">Symbol</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><h4 id="_4-为什么需要-symbol"><a href="#_4-为什么需要-symbol" class="header-anchor">#</a> 4. 为什么需要 Symbol</h4> <p>在企业开发中，对一些第三方的框架或者插件自定义的时候，可能会因为添加了同名的属性或者方法，将框架中原有的属性或者方法覆盖掉。为了避免这种情况的发生，框架的作者或者我们就可以使用 Symbol 作为属性或者方法的名称</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 假设这是一个插件</span>
<span class="token keyword">let</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'alex'</span>
<span class="token punctuation">}</span>
<span class="token comment">// 我们在使用的时候由于和插件的变量名一样，导致覆盖原有的值</span>
obj<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">'tom'</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>obj<span class="token punctuation">.</span>name<span class="token punctuation">)</span>  <span class="token comment">// tom</span>

<span class="token comment">// 这种情况下，我们就要用到 Symbol</span>
<span class="token keyword">let</span> name <span class="token operator">=</span> <span class="token function">Symbol</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">let</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token comment">// 如果想要变量作为对象的键，那么就必须要加入 [] 中括号</span>
    <span class="token punctuation">[</span>name<span class="token punctuation">]</span><span class="token operator">:</span> <span class="token string">'alex'</span>
<span class="token punctuation">}</span>
obj<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">'123456'</span>

<span class="token comment">// 此时并没有覆盖</span>
obj <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'123456'</span><span class="token punctuation">,</span>
    <span class="token function">Symbol</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token string">'alex'</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="_5-如何区分-symbol"><a href="#_5-如何区分-symbol" class="header-anchor">#</a> 5. 如何区分 Symbol</h4> <p>在通过 Symbol 生成值得时候可以设置一个标记，这个标记仅仅用于区分，没有其他含义。</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token comment">// name 作为标记仅仅是用于区分</span>
<span class="token keyword">let</span> name <span class="token operator">=</span> <span class="token function">Symbol</span><span class="token punctuation">(</span><span class="token string">'name'</span><span class="token punctuation">)</span>
</code></pre></div><h4 id="_6-使用-symbol-的注意点"><a href="#_6-使用-symbol-的注意点" class="header-anchor">#</a> 6. 使用 Symbol 的注意点</h4> <ul><li>生成 Symbol 的时候不能加<code>new</code>，因为这是一个基本数据类型，不是引用数据类型</li> <li>Symbol的标记仅仅是便于阅读代码，没有任何作用</li> <li>做类型转换的时候不能转换为数值</li> <li>不能做任何运算</li> <li>Symbol生成的值一定要保存下来，否则后续将无法使用</li> <li>for 循环无法遍历出 Symbol 的属性和方法，通过<code>Object.getOwnPropertySymbols(obj)</code>方法可以获取到obj中的所有 Symbol 属性或方法</li></ul> <h3 id="_9-7-迭代器与生成器"><a href="#_9-7-迭代器与生成器" class="header-anchor">#</a> 9.7 迭代器与生成器</h3> <p>和 ES6 的迭代器与生成器相同</p> <h4 id="_1-迭代器-iterator"><a href="#_1-迭代器-iterator" class="header-anchor">#</a> 1. 迭代器 iterator</h4> <p>在 ES6 中迭代器的接口是<code>for...of</code></p> <p>默认情况下：<code>Array/Map/Set/String/TypedArray/函数的 arguments 对象/NodeList</code>都实现了 iterator</p> <p><strong>对象默认情况下没有实现 iterator 接口，所以默认情况下不能使用 for...of</strong></p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">let</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">]</span>
<span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> value <span class="token keyword">of</span> arr<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token comment">// 1</span>
<span class="token comment">// 3</span>
<span class="token comment">// 5</span>
</code></pre></div><p>只要一个数据已经实现了 iterator 接口，那么这个数据就有一个叫做<code>Symbol.iterator</code>属性，该属性返回一个方法</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">let</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">]</span>
<span class="token keyword">let</span> it <span class="token operator">=</span> arr<span class="token punctuation">[</span>Symbol<span class="token punctuation">.</span>iterator<span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>it<span class="token punctuation">)</span>  <span class="token comment">// Array iterator</span>
<span class="token comment">// it 中有一个方法 next</span>
<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>it<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// { value: 1, done: false }</span>
<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>it<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// { value: 3, done: false }</span>
<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>it<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// { value: 4, done: false }</span>
<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>it<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// { value: undefined, done: true }</span>
</code></pre></div><ul><li>只要一个数据实现了 iterator 接口，那么就一定会有<code>Symbol.iterator</code>属性</li> <li>该属性返回一个函数</li> <li>返回的函数会返回一个对象</li> <li>返回的对象会有一个名称叫做<code>next</code>的函数</li> <li><code>next</code>每次执行会返回一个对象<code>{value: 1, done: false}</code></li></ul> <h5 id="手动实现-iterator"><a href="#手动实现-iterator" class="header-anchor">#</a> 手动实现 iterator</h5> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">class</span> <span class="token class-name">MyArray</span> <span class="token punctuation">{</span>
    <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> arguments<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">this</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> arguments<span class="token punctuation">[</span>i<span class="token punctuation">]</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>length <span class="token operator">=</span> arguments<span class="token punctuation">.</span>length
    <span class="token punctuation">}</span>
    <span class="token punctuation">[</span>Symbol<span class="token punctuation">.</span>iterator<span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">let</span> index <span class="token operator">=</span> <span class="token number">0</span>
        <span class="token keyword">let</span> _this <span class="token operator">=</span> <span class="token keyword">this</span>
        <span class="token keyword">return</span> <span class="token punctuation">{</span>
            <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span>index <span class="token operator">&lt;</span> _this<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    <span class="token keyword">return</span> <span class="token punctuation">{</span>
                        value<span class="token operator">:</span> _this<span class="token punctuation">[</span>index<span class="token operator">++</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
                        done<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
                    <span class="token punctuation">}</span>
                <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
                    <span class="token keyword">return</span> <span class="token punctuation">{</span>
                        value<span class="token operator">:</span> _this<span class="token punctuation">[</span>index<span class="token punctuation">]</span><span class="token punctuation">,</span>
                        done<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
                    <span class="token punctuation">}</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">let</span> arr <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MyArray</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">)</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> value <span class="token keyword">of</span> arr<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><h5 id="iterator的应用场景"><a href="#iterator的应用场景" class="header-anchor">#</a> iterator的应用场景</h5> <p><strong>解构赋值：</strong></p> <div class="language-tsx extra-class"><pre class="language-tsx"><code><span class="token keyword">let</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span>
<span class="token keyword">let</span> <span class="token punctuation">[</span>x<span class="token punctuation">,</span> y<span class="token punctuation">,</span> z<span class="token punctuation">]</span> <span class="token operator">=</span> arr
<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">,</span> z<span class="token punctuation">)</span> <span class="token comment">// 1, 3, undefined</span>
</code></pre></div><p>内部其实是用<code>next()</code>方法来进行解构的</p> <p><strong>扩展运算符</strong></p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">let</span> arr1 <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">]</span>
<span class="token keyword">let</span> arr2 <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">]</span>
<span class="token keyword">let</span> arr3 <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">]</span>
<span class="token keyword">let</span> arr4 <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token operator">...</span>arr1<span class="token punctuation">,</span> <span class="token operator">...</span>arr2<span class="token punctuation">,</span> <span class="token operator">...</span>arr3<span class="token punctuation">]</span>  <span class="token comment">// 1, 2, 3, 4, 5, 6</span>
</code></pre></div><h4 id="_2-生成器-generator"><a href="#_2-生成器-generator" class="header-anchor">#</a> 2. 生成器 generator</h4> <h5 id="_1-generator-概念"><a href="#_1-generator-概念" class="header-anchor">#</a> 1 generator 概念</h5> <h6 id="什么是-generator"><a href="#什么是-generator" class="header-anchor">#</a> 什么是 generator</h6> <p>Generator 函数是 ES6 提供的一种异步编程解决方案，Generator 函数内部可以封装多个状态，因此又可以理解为是一个状态机。</p> <h6 id="如何定义-generator"><a href="#如何定义-generator" class="header-anchor">#</a> 如何定义 generator</h6> <p>只需要在普通函数的 function 后面加上<code>*</code></p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">function</span><span class="token operator">*</span> <span class="token function">generator</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    
<span class="token punctuation">}</span>
</code></pre></div><h6 id="generator-与普通函数的区别"><a href="#generator-与普通函数的区别" class="header-anchor">#</a> generator 与普通函数的区别</h6> <ul><li>调用 generator 函数后，无论函数有没有返回值，都会返回一个迭代器对象</li> <li>调用 generator 函数后，函数中封装的代码不会立即执行</li></ul> <h6 id="yield-关键字"><a href="#yield-关键字" class="header-anchor">#</a> yield 关键字</h6> <p>真正让 generator 有价值的是<code>yield</code>关键字</p> <ul><li>在 generator 函数内部使用<code>yield</code>关键字定义状态</li> <li>并且 yield 可以让 generator 内部的逻辑能够切割多个状态</li> <li>通过调用迭代器的<code>next</code>方法执行一个部分代码</li></ul> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">function</span><span class="token operator">*</span> <span class="token function">gen</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// 使用 yield 定义一个状态，就会将代码切割一部分</span>
  <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'123'</span><span class="token punctuation">)</span>
  <span class="token keyword">yield</span> <span class="token string">'aaa'</span>
  <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'456'</span><span class="token punctuation">)</span>
  <span class="token keyword">yield</span> <span class="token number">1</span> <span class="token operator">+</span> <span class="token number">1</span>
  <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'789'</span><span class="token punctuation">)</span>
  <span class="token keyword">yield</span> <span class="token boolean">true</span>
<span class="token punctuation">}</span>
</code></pre></div><p>每次执行<code>next</code>都会执行下一段代码</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">const</span> g <span class="token operator">=</span> <span class="token function">gen</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>g<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token comment">// 123 { value: 'aaa', done: false }</span>
<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>g<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token comment">// 456 { value:  2, done: false }</span>
<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>g<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token comment">// 789 { value: true, done: false }</span>
<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>g<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token comment">//     { value: undefined, done: true }</span>
</code></pre></div><p>调用 next 的时候可以传递一个参数，该参数会被传递到<strong>上一个</strong> yield</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">function</span><span class="token operator">*</span> <span class="token function">gen</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'第一段代码'</span><span class="token punctuation">)</span>
  <span class="token keyword">let</span> res <span class="token operator">=</span> <span class="token keyword">yield</span> <span class="token string">'123'</span>
  <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'第二段代码：'</span><span class="token punctuation">,</span> res<span class="token punctuation">)</span>
  <span class="token keyword">yield</span> <span class="token number">1</span> <span class="token operator">+</span> <span class="token number">1</span>
  <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'第三段代码'</span><span class="token punctuation">)</span>
  <span class="token keyword">yield</span> <span class="token boolean">true</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> g <span class="token operator">=</span> <span class="token function">gen</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
g<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span>             <span class="token comment">// 第一段代码</span>
g<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token string">'获取到参数'</span><span class="token punctuation">)</span>  <span class="token comment">// 第二段代码：获取到参数</span>
g<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span>             <span class="token comment">// 第三段代码</span>
</code></pre></div><h5 id="_2-generator-的应用场景"><a href="#_2-generator-的应用场景" class="header-anchor">#</a> 2 generator 的应用场景</h5> <h6 id="让函数返回多个值"><a href="#让函数返回多个值" class="header-anchor">#</a> <strong>让函数返回多个值</strong></h6> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token comment">// 像要求两个数的和和差，之前可以这么做</span>
<span class="token keyword">function</span> <span class="token function">calculate</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> b<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">[</span>a <span class="token operator">+</span> b<span class="token punctuation">,</span> a <span class="token operator">-</span> b<span class="token punctuation">]</span>
<span class="token punctuation">}</span>
<span class="token comment">// 使用 generator 这么做</span>
<span class="token keyword">function</span><span class="token operator">*</span> <span class="token function">calculate</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> b<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">yield</span> a <span class="token operator">+</span> b
    <span class="token keyword">yield</span> a <span class="token operator">-</span> b
<span class="token punctuation">}</span>
</code></pre></div><h6 id="利用-generator-快速定义一个对象上的-iterator"><a href="#利用-generator-快速定义一个对象上的-iterator" class="header-anchor">#</a> 利用 generator 快速定义一个对象上的 iterator</h6> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">let</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>
  name<span class="token operator">:</span> <span class="token string">'alex'</span><span class="token punctuation">,</span>
  age<span class="token operator">:</span> <span class="token number">19</span><span class="token punctuation">,</span>
  gender<span class="token operator">:</span> <span class="token string">'male'</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>

obj<span class="token punctuation">[</span>Symbol<span class="token punctuation">.</span>iterator<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token operator">*</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> keys <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> keys<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">yield</span> obj<span class="token punctuation">[</span>keys<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> it <span class="token operator">=</span> obj<span class="token punctuation">[</span>Symbol<span class="token punctuation">.</span>iterator<span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> value <span class="token keyword">of</span> obj<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token comment">// alex  19  male</span>
</code></pre></div><h3 id="_9-8-模块系统"><a href="#_9-8-模块系统" class="header-anchor">#</a> 9.8 模块系统</h3> <h4 id="_1-es6-模块"><a href="#_1-es6-模块" class="header-anchor">#</a> 1. ES6 模块</h4> <h5 id="分开导入导出"><a href="#分开导入导出" class="header-anchor">#</a> 分开导入导出</h5> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">import</span> xxx<span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> xxx <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'xxx'</span>
</code></pre></div><h5 id="一次性导入导出"><a href="#一次性导入导出" class="header-anchor">#</a> 一次性导入导出</h5> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> xxx<span class="token punctuation">,</span> yyy<span class="token punctuation">,</span> zzz <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'aaa'</span>
<span class="token keyword">export</span> <span class="token punctuation">{</span> xxx<span class="token punctuation">,</span> yyy<span class="token punctuation">,</span> zzz <span class="token punctuation">}</span>
</code></pre></div><h5 id="默认导入导出"><a href="#默认导入导出" class="header-anchor">#</a> 默认导入导出</h5> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">import</span> xxx <span class="token keyword">from</span> <span class="token string">'aaa'</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> xxx
</code></pre></div><h4 id="_2-node-模块"><a href="#_2-node-模块" class="header-anchor">#</a> 2. Node 模块</h4> <h5 id="导出"><a href="#导出" class="header-anchor">#</a> 导出</h5> <div class="language-ts extra-class"><pre class="language-ts"><code>exports<span class="token punctuation">.</span>xxx <span class="token operator">=</span> xxx
module<span class="token punctuation">.</span>exports<span class="token punctuation">.</span>xxx <span class="token operator">=</span> xxx
</code></pre></div><h5 id="导入"><a href="#导入" class="header-anchor">#</a> 导入</h5> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">const</span> xxx <span class="token operator">=</span> <span class="token keyword">require</span><span class="token punctuation">(</span><span class="token string">'yyy'</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span> xxx<span class="token punctuation">,</span> yyy <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">require</span><span class="token punctuation">(</span><span class="token string">'zzz'</span><span class="token punctuation">)</span>
</code></pre></div><h4 id="_3-ts-兼容"><a href="#_3-ts-兼容" class="header-anchor">#</a> 3. TS 兼容</h4> <p>ES6的模块和Node的模块是不兼容的，所以 TS 为了兼容就推出了</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">export</span> <span class="token operator">=</span> xxx<span class="token punctuation">;</span>
<span class="token keyword">import</span> xxx <span class="token operator">=</span> <span class="token keyword">require</span><span class="token punctuation">(</span><span class="token string">'yyy'</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="_9-9-命名空间"><a href="#_9-9-命名空间" class="header-anchor">#</a> 9.9 命名空间</h3> <h4 id="_1-什么是命名空间"><a href="#_1-什么是命名空间" class="header-anchor">#</a> 1. 什么是命名空间</h4> <p>命名空间可以看作是一个微型模块，当我们先把相关的业务代码写在一起，又不想污染全局空间的时候，我们就可以使用命名空间。本质就是定义一个大对象，把变量/方法/类/接口...放在里面。</p> <h4 id="_2-命名空间和模块区别"><a href="#_2-命名空间和模块区别" class="header-anchor">#</a> 2. 命名空间和模块区别</h4> <ul><li>在程序内部使用的代码，可以使用命名空间封装和防止全局污染</li> <li>在程序外部使用的代码，可以使用模块封装和防止全局污染</li> <li>总结：由于模块也能实现相同功能，所以大部分时候使用模块即可</li></ul> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">namespace</span> Validation <span class="token punctuation">{</span>
    <span class="token keyword">const</span> letterRegexp <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^[A-Za-z]+$</span><span class="token regex-delimiter">/</span></span>
    <span class="token comment">// 需要导出，才能在外界使用</span>
    <span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">LetterValidator</span> <span class="token operator">=</span> value <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> letterRegexp<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">// 使用命名空间中的函数</span>
Validation<span class="token punctuation">.</span><span class="token function">LetterValidator</span><span class="token punctuation">(</span><span class="token string">'aaa'</span><span class="token punctuation">)</span>  <span class="token comment">// true</span>
</code></pre></div><h4 id="_3-将命名空间封装到模块中"><a href="#_3-将命名空间封装到模块中" class="header-anchor">#</a> 3. 将命名空间封装到模块中</h4> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token comment">// ./test/test.ts</span>
<span class="token keyword">namespace</span> Validation <span class="token punctuation">{</span>
    <span class="token keyword">const</span> letterRegexp <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^[A-Za-z]+$</span><span class="token regex-delimiter">/</span></span>
    <span class="token comment">// 需要导出，才能在外界使用</span>
    <span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">LetterValidator</span> <span class="token operator">=</span> value <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> letterRegexp<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><div class="language-ts extra-class"><pre class="language-ts"><code><span class="token comment">// 要想使用，必须加入下面的 三个斜杠</span>
<span class="token comment">/// &lt;reference path=&quot;/test/test.ts&quot; /&gt;</span>
<span class="token comment">// 使用命名空间中的函数</span>
Validation<span class="token punctuation">.</span><span class="token function">LetterValidator</span><span class="token punctuation">(</span><span class="token string">'aaa'</span><span class="token punctuation">)</span>
</code></pre></div><p>TS 遇到<code>/// &lt;reference path=&quot;/test/test.ts&quot; /&gt;</code>就会把其中的代码加载到当前的代码中，但是默认情况下，webpack并不会自动合并</p> <p>将 <code>tsconfig.json</code> 中<code>outFile</code>表示打包后输出的文件，<code>outDir</code>表示输出到哪个目录</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
	<span class="token property">&quot;module&quot;</span><span class="token operator">:</span> <span class="token string">&quot;system&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;outFile&quot;</span><span class="token operator">:</span> <span class="token string">&quot;./js/bundle.js&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;outDir&quot;</span><span class="token operator">:</span> <span class="token string">&quot;./dist&quot;</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="_9-10-声明合并"><a href="#_9-10-声明合并" class="header-anchor">#</a> 9.10 声明合并</h3> <p>在 TS 中接口和命名空间是可以重复的，ts会将多个同名的合并为一个。</p> <h4 id="_1-接口"><a href="#_1-接口" class="header-anchor">#</a> 1. 接口</h4> <ul><li>同名接口如果属性名相同，那么属性类型必须一致</li> <li>同名接口如果出现同名函数，那么就会成为一个函数的重载</li></ul> <h4 id="_2-命名空间"><a href="#_2-命名空间" class="header-anchor">#</a> 2. 命名空间</h4> <ul><li>同名的命名空间不能出现同名的属性或方法</li> <li>同名的命名空间中其他命名空间没有通过<code>export</code>导出的内容是获取不到的</li></ul> <h4 id="_3-命名空间与同名的类-函数-枚举合并"><a href="#_3-命名空间与同名的类-函数-枚举合并" class="header-anchor">#</a> 3. 命名空间与同名的类/函数/枚举合并</h4> <p>注意：类必须定义在命名空间的前面</p> <p>会将命名空间导出的方法作为一个静态方法合并到类中</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">class</span> <span class="token class-name">Person</span> <span class="token punctuation">{</span>
    <span class="token function">say</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span> <span class="token punctuation">{</span>
        <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'hello world'</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">namespace</span> Person <span class="token punctuation">{</span>
	<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">hi</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'hi'</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="_4-命名空间和函数合并"><a href="#_4-命名空间和函数合并" class="header-anchor">#</a> 4. 命名空间和函数合并</h4> <p>注意：函数必须声明在命名空间的前面</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">function</span> <span class="token function">getCounter</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    getCounter<span class="token punctuation">.</span>count<span class="token operator">++</span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>getCounter<span class="token punctuation">.</span>count<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token keyword">namespace</span> getCounter <span class="token punctuation">{</span>
    <span class="token keyword">export</span> <span class="token keyword">let</span> count<span class="token operator">:</span> <span class="token builtin">number</span> <span class="token operator">=</span> <span class="token number">0</span>
<span class="token punctuation">}</span>
<span class="token function">getCounter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 1</span>
<span class="token function">getCounter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 2</span>
</code></pre></div><h4 id="_5-命名空间和枚举合并"><a href="#_5-命名空间和枚举合并" class="header-anchor">#</a> 5. 命名空间和枚举合并</h4> <p>注意点：没有先后顺序的要求</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">enum</span> Gender <span class="token punctuation">{</span>
    Male<span class="token punctuation">,</span>
    Female
<span class="token punctuation">}</span>
<span class="token keyword">namespace</span> Gender <span class="token punctuation">{</span>
    <span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token constant">A</span><span class="token operator">:</span> <span class="token builtin">number</span> <span class="token operator">=</span> <span class="token number">666</span>
<span class="token punctuation">}</span>
<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Gender<span class="token punctuation">)</span>
</code></pre></div><h3 id="_9-11-装饰器"><a href="#_9-11-装饰器" class="header-anchor">#</a> 9.11 装饰器</h3> <h4 id="_1-什么是装饰器"><a href="#_1-什么是装饰器" class="header-anchor">#</a> 1. 什么是装饰器</h4> <p><code>Decorator</code>是 ES7 的一个新语法，目前属于提案中。</p> <p>装饰器是一种特殊类型的声明，它能够被附加到类、方法、访问器、属性或者参数上。被添加到不同地方的装饰器有不同的名称或者特点。</p> <h4 id="_2-装饰器的基本格式"><a href="#_2-装饰器的基本格式" class="header-anchor">#</a> 2. 装饰器的基本格式</h4> <ul><li>普通装饰器</li> <li>装饰器工厂</li> <li>装饰器组合</li></ul> <h4 id="_3-如何在-ts-中使用装饰器"><a href="#_3-如何在-ts-中使用装饰器" class="header-anchor">#</a> 3. 如何在 TS 中使用装饰器</h4> <p>在<code>tsconfig.json</code>中，加入配置<code>experimentalDecorators</code></p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
    <span class="token property">&quot;experimentalDecorators&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span>
<span class="token punctuation">}</span>
</code></pre></div><div class="language-ts extra-class"><pre class="language-ts"><code><span class="token comment">// test 就是一个普通装饰器</span>
<span class="token keyword">function</span> <span class="token function">test</span><span class="token punctuation">(</span>target<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'hello'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token comment">// 给 Person 绑定了一个装饰器</span>
<span class="token comment">// 这个装饰器的代码在定义类之前执行</span>
<span class="token decorator"><span class="token at operator">@</span><span class="token function">test</span></span>
<span class="token keyword">class</span> <span class="token class-name">Person</span> <span class="token punctuation">{</span>
    
<span class="token punctuation">}</span>
</code></pre></div><h5 id="装饰器工厂"><a href="#装饰器工厂" class="header-anchor">#</a> 装饰器工厂</h5> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token comment">// 返回一个函数的装饰器是装饰器工厂</span>
<span class="token keyword">function</span> <span class="token function">factory</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'factory out'</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> target <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'factory in'</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// 普通装饰器和装饰器工厂可以混合使用</span>
<span class="token comment">// 执行顺序：先执行装饰器工厂，再执行普通装饰器</span>
<span class="token decorator"><span class="token at operator">@</span><span class="token function">test</span></span>
<span class="token decorator"><span class="token at operator">@</span><span class="token function">factory</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">class</span> <span class="token class-name">Person</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>  <span class="token comment">// 先 out 再 in</span>
</code></pre></div><ul><li>先从上至下的执行所有的装饰器工厂，再从下至上的执行所有的普通装饰器</li></ul> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">function</span> <span class="token function">f1</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'f1 out'</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> target <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'f1 in'</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token function">f2</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'f2 out'</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> target <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'f2 in'</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token function">n1</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'n1 in'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token function">n2</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'n2 in'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token decorator"><span class="token at operator">@</span><span class="token function">n1</span></span>
<span class="token decorator"><span class="token at operator">@</span><span class="token function">f1</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token decorator"><span class="token at operator">@</span><span class="token function">f2</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token decorator"><span class="token at operator">@</span><span class="token function">n2</span></span>
<span class="token keyword">class</span> <span class="token class-name">Person</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token comment">// 输出顺序：</span>
<span class="token comment">// f1 out / f2 out / n2 in / f2 in / f1 in / n1 in</span>
</code></pre></div><h4 id="_4-类装饰器"><a href="#_4-类装饰器" class="header-anchor">#</a> 4. 类装饰器</h4> <ul><li>类装饰器与类声明绑定（紧靠着类声明）</li> <li>类装饰器用于监听、修改或者替换类定义</li> <li>在执行类装饰器函数的时候，回把绑定的类作为其唯一的参数传递给装饰器</li> <li>如果类装饰器返回一个新的类，他会用新的类代替原有的类的定义</li></ul> <h5 id="类装饰器和装饰器工厂的区别"><a href="#类装饰器和装饰器工厂的区别" class="header-anchor">#</a> 类装饰器和装饰器工厂的区别</h5> <p>类装饰器可以传递参数</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">function</span> <span class="token generic-function"><span class="token function">test</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token punctuation">{</span><span class="token keyword">new</span> <span class="token punctuation">(</span><span class="token operator">...</span>args<span class="token operator">:</span><span class="token builtin">any</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>target<span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">class</span> <span class="token class-name"><span class="token keyword">extends</span></span> target <span class="token punctuation">{</span>
        name<span class="token operator">:</span> <span class="token builtin">string</span> <span class="token operator">=</span> <span class="token string">'alex'</span>
        age<span class="token operator">:</span> <span class="token builtin">number</span> <span class="token operator">=</span> <span class="token number">19</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token decorator"><span class="token at operator">@</span><span class="token function">test</span></span>
<span class="token keyword">class</span> <span class="token class-name">Person</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

<span class="token keyword">let</span> p <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>p<span class="token punctuation">)</span>  <span class="token comment">// { name: alex, age: 19 }</span>
</code></pre></div><h4 id="_5-方法装饰器"><a href="#_5-方法装饰器" class="header-anchor">#</a> 5. 方法装饰器</h4> <p>方法装饰器写在一个方法的声明之前，方法装饰器用来定监视、修改或者替换方法定义。</p> <p>方法装饰器表达式在运行时当作函数被调用，传入下面3个参数：</p> <ul><li>处于静态方法而言就是当前的类，对于实例方法而言就是当前的实例</li> <li>被绑定方法的名字</li> <li>被绑定方法的属性描述符</li></ul> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token comment">// 一个案例：动态替换方法</span>

<span class="token keyword">function</span> <span class="token function">test</span><span class="token punctuation">(</span>target<span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">,</span> propertyKey<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span> descriptor<span class="token operator">:</span> PropertyDescriptor<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    descriptor<span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'decorator name'</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">Person</span> <span class="token punctuation">{</span>
    <span class="token decorator"><span class="token at operator">@</span><span class="token function">test</span></span>
    <span class="token function">sayName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">:</span><span class="token keyword">void</span> <span class="token punctuation">{</span>
        <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'inner name'</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> p <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
p<span class="token punctuation">.</span><span class="token function">sayName</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token comment">// decorator name</span>
</code></pre></div><h4 id="_6-访问器装饰器"><a href="#_6-访问器装饰器" class="header-anchor">#</a> 6. 访问器装饰器</h4> <p>访问器装饰器生命在一个访问器的声明之前（紧靠着访问器声明）</p> <p>访问器装饰器应用于访问器的属性描述符并且可以用来监视、修改或替换一个访问器的定义。</p> <p>访问器装饰器表达式在运行时当作函数被调用，传入下列 3 个参数：</p> <ul><li>对于静态成员来说是类的构造函数，对于实例成员来说是类的原型对象</li> <li>成员的名字</li> <li>成员的属性描述符</li></ul> <p><strong>注意：</strong></p> <p>TypeScript 不允许同时装饰一个成员的 get 和 set 访问器，取而代之的是，一个成员的所有装饰器都必须应用在文档顺序的第一个访问器上</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">function</span> <span class="token function">test</span><span class="token punctuation">(</span>target<span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">,</span> propertyKey<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span> descriptor<span class="token operator">:</span> PropertyDescriptor<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 既能拿到 get ，还能拿到 set，所以只能设置一个访问器装饰器</span>
    descriptor<span class="token punctuation">.</span><span class="token function-variable function">set</span> <span class="token operator">=</span> <span class="token punctuation">(</span>value<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        target<span class="token punctuation">.</span>myName <span class="token operator">=</span> value
    <span class="token punctuation">}</span>
    descriptor<span class="token punctuation">.</span>get <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">string</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> target<span class="token punctuation">.</span>myName
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">Person</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> _name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
    <span class="token function">constructor</span><span class="token punctuation">(</span>name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>_name <span class="token operator">=</span> name
    <span class="token punctuation">}</span>
    <span class="token comment">// set 或 get 装饰器哪个在前面，就设置哪一个，两个不能设置为装饰器</span>
    <span class="token decorator"><span class="token at operator">@</span><span class="token function">test</span></span>
    <span class="token keyword">get</span> <span class="token function">name</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">string</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>_name
    <span class="token punctuation">}</span>
    <span class="token keyword">set</span> <span class="token function">name</span><span class="token punctuation">(</span>value<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>_name <span class="token operator">=</span> value
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> p <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token string">&quot;zzz&quot;</span><span class="token punctuation">)</span>
p<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">'yyy'</span>
<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>p<span class="token punctuation">.</span>name<span class="token punctuation">)</span>
</code></pre></div><h4 id="_7-属性装饰器"><a href="#_7-属性装饰器" class="header-anchor">#</a> 7. 属性装饰器</h4> <p>属性装饰器生命在一个属性的声明之前（紧靠着属性声明）</p> <p>属性装饰器表达式在运行时当作函数被调用，传入下列 3 个参数：</p> <ul><li>对于静态属性来说就是当前的类，对于实例属性来说就是当前实例</li> <li>成员的名字</li></ul> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">function</span> <span class="token function">test</span><span class="token punctuation">(</span>target<span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">,</span> propertyKey<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    target<span class="token punctuation">[</span>propertyKey<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">'123'</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">Person</span> <span class="token punctuation">{</span>
    <span class="token keyword">static</span> age<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
    <span class="token decorator"><span class="token at operator">@</span><span class="token function">test</span></span>
    name<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="_8-参数装饰器"><a href="#_8-参数装饰器" class="header-anchor">#</a> 8. 参数装饰器</h4> <p>参数装饰器生命在一个参数的声明之前（紧靠着参数声明）</p> <p>参数装饰器表达式在运行时当作函数被调用，传入下列 3 个参数：</p> <ul><li>对于静态成员来说就是当前的类，对于实例成员来说就是当前实例</li> <li>参数所在的方法名称</li> <li>参数在参数列表中的索引</li></ul> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">function</span> <span class="token function">test</span><span class="token punctuation">(</span>target<span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">,</span> propertyKey<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span> index<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">Person</span> <span class="token punctuation">{</span>
    <span class="token function">say</span><span class="token punctuation">(</span>age<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">,</span> <span class="token decorator"><span class="token at operator">@</span><span class="token function">test</span></span> name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span> <span class="token punctuation">{</span>
        
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="_9-注意"><a href="#_9-注意" class="header-anchor">#</a> 9. 注意</h4> <p>属性装饰器和参数装饰器最常见的应用场景就是配合元数据（reflect-metadata）,在不改变原有数据的同时增加一些额外的信息。</p> <p>但是元数据目前也在提案中，没有纳入正式的规范</p> <h3 id="_9-12-混入"><a href="#_9-12-混入" class="header-anchor">#</a> 9.12 混入</h3> <h4 id="_1-对象混入"><a href="#_1-对象混入" class="header-anchor">#</a> 1. 对象混入</h4> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">let</span> obj1 <span class="token operator">=</span> <span class="token punctuation">{</span> name<span class="token operator">:</span> <span class="token string">'alex'</span> <span class="token punctuation">}</span>
<span class="token keyword">let</span> obj2 <span class="token operator">=</span> <span class="token punctuation">{</span> age<span class="token operator">:</span> <span class="token number">13</span> <span class="token punctuation">}</span>

Object<span class="token punctuation">.</span><span class="token function">assign</span><span class="token punctuation">(</span>obj1<span class="token punctuation">,</span> obj2<span class="token punctuation">)</span>

<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>obj1<span class="token punctuation">)</span>  <span class="token comment">// { name: 'alex', age: 13 }</span>
<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>obj2<span class="token punctuation">)</span>  <span class="token comment">// { age&quot; 13 }</span>
</code></pre></div><h4 id="_2-类混入"><a href="#_2-类混入" class="header-anchor">#</a> 2. 类混入</h4> <p>需要自定义一个方法，来<code>mixin</code>混入</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">function</span> <span class="token function">myMixin</span><span class="token punctuation">(</span>target<span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">,</span> from<span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  from<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span>fromItem <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    Object<span class="token punctuation">.</span><span class="token function">getOwnPropertyNames</span><span class="token punctuation">(</span>fromItem<span class="token punctuation">.</span>prototype<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span>name <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      target<span class="token punctuation">.</span>prototype<span class="token punctuation">[</span>name<span class="token punctuation">]</span> <span class="token operator">=</span> fromItem<span class="token punctuation">.</span>prototype<span class="token punctuation">[</span>name<span class="token punctuation">]</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">Cat</span> <span class="token punctuation">{</span>
  name<span class="token operator">:</span> <span class="token builtin">string</span>
  <span class="token function">say</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span> <span class="token punctuation">{</span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'meow'</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">Dog</span> <span class="token punctuation">{</span>
  age<span class="token operator">:</span> <span class="token builtin">number</span>
  <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span> <span class="token punctuation">{</span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'run'</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">Animal</span> <span class="token keyword">implements</span> <span class="token class-name">Cat</span><span class="token punctuation">,</span> Dog <span class="token punctuation">{</span>
  name<span class="token operator">:</span> <span class="token builtin">string</span>
  <span class="token function-variable function">say</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">void</span>
  age<span class="token operator">:</span> <span class="token builtin">number</span>
  <span class="token function-variable function">run</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">void</span>
<span class="token punctuation">}</span>

<span class="token function">myMixin</span><span class="token punctuation">(</span>Animal<span class="token punctuation">,</span> <span class="token punctuation">[</span>Dog<span class="token punctuation">,</span> Cat<span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token keyword">let</span> a <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Animal</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span>
a<span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
a<span class="token punctuation">.</span><span class="token function">say</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="_9-13-声明"><a href="#_9-13-声明" class="header-anchor">#</a> 9.13 声明</h3> <h4 id="_1-什么是声明"><a href="#_1-什么是声明" class="header-anchor">#</a> 1. 什么是声明</h4> <p>在企业开发中我们不可避免的需要引入第三方 JS 的库，但是默认情况下 TS 是不认识我们引入的这些 JS 的库的。所以我们在使用这些 JS 的库时，我们要告诉 TS 它是什么，它怎么用。</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token comment">// 比如我们使用了 jquery 的库，但是 $ TS 不知道这是什么，也不会有任何提示</span>
<span class="token comment">// 声明一下 $,说明它接受一个 selector 参数 ，是一个函数</span>
<span class="token keyword">declare</span> <span class="token keyword">const</span> <span class="token function-variable function">$</span><span class="token operator">:</span> <span class="token punctuation">(</span>selector<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// 这里写此声明中存在的属性/方法</span>
    <span class="token function">width</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">,</span>
    <span class="token function">height</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">,</span>
    <span class="token function">ajax</span><span class="token punctuation">(</span>url<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span> config<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>$<span class="token punctuation">)</span>
<span class="token comment">// 这样就有提示了</span>
<span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'.app'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">width</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><h4 id="_2-声明文件"><a href="#_2-声明文件" class="header-anchor">#</a> 2. 声明文件</h4> <p>TS 推荐将定义单独写在一个文件中，声明文件一般叫做<code>xx.d.ts</code></p> <p>注意：声明中不能出现实现</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token comment">// test.d.ts</span>
<span class="token keyword">declare</span> <span class="token keyword">let</span> name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
<span class="token keyword">declare</span> <span class="token keyword">function</span> <span class="token function">say</span><span class="token punctuation">(</span>name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span><span class="token punctuation">;</span>
<span class="token keyword">declare</span> <span class="token keyword">class</span> <span class="token class-name">Person</span> <span class="token punctuation">{</span>
    name<span class="token operator">:</span> <span class="token builtin">string</span>
    age<span class="token operator">:</span> <span class="token builtin">number</span>
    <span class="token function">constructor</span><span class="token punctuation">(</span>name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span> age<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span>
    <span class="token function">say</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span>
<span class="token punctuation">}</span>
</code></pre></div><div class="language-ts extra-class"><pre class="language-ts"><code><span class="token comment">// test.ts</span>
<span class="token keyword">let</span> name<span class="token operator">:</span> <span class="token builtin">string</span> <span class="token operator">=</span> <span class="token string">'aa'</span>
<span class="token keyword">function</span> <span class="token function">say</span><span class="token punctuation">(</span>name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="_3-声明安装"><a href="#_3-声明安装" class="header-anchor">#</a> 3. 声明安装</h4> <p>对于常见的第三方库，不少已经有现成的声明文件，所以在企业开发中，我们可以直接使用第三方的类型声明文件来使用</p> <p>TS 声明文件的规范<code>@types/xx</code></p> <p>例如我想要使用 jquery 的声明文件，直接</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">npm</span> <span class="token function">install</span> @types/jquery
</code></pre></div><div class="language-ts extra-class"><pre class="language-ts"><code><span class="token comment">// 使用</span>
<span class="token keyword">import</span> jQuery <span class="token operator">=</span> <span class="token keyword">require</span><span class="token punctuation">(</span><span class="token string">'jquery'</span><span class="token punctuation">)</span>
<span class="token comment">// 有提示了</span>
<span class="token function">jQuery</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">width</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><p>如果使用的第三方库没有提示，那就只能按照 <a href="https://www.tslang.cn/docs/handbook/declaration-files/templates.html" target="_blank" rel="noopener noreferrer">模板文件 <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>去自己编写了</p></div></div> <!----> <div class="page-edit"><!----> <!----> <!----></div> <div class="page-nav-wapper"><div class="page-nav-centre-wrap"><a href="/docs-vuepress-system/pages/3ffb0b/" class="page-nav-centre page-nav-centre-prev"><div class="tooltip">07_jQuery UI</div></a> <!----></div> <div class="page-nav"><p class="inner"><span class="prev">
          ←
          <a href="/docs-vuepress-system/pages/3ffb0b/" class="prev">07_jQuery UI</a></span> <!----></p></div></div></div> <div class="article-list"><div class="article-title"><a href="/docs-vuepress-system/archives/" class="iconfont icon-bi">最近更新</a></div> <div class="article-wrapper"><dl><dd>01</dd> <dt><a href="/docs-vuepress-system/pages/e99376/"><div>
              00_stylus
              <!----></div></a> <span class="date">07-07</span></dt></dl><dl><dd>02</dd> <dt><a href="/docs-vuepress-system/pages/1277de/"><div>
              00_scss
              <!----></div></a> <span class="date">07-07</span></dt></dl><dl><dd>03</dd> <dt><a href="/docs-vuepress-system/pages/da4c3c/"><div>
              00_响应式页面的四大核心要素
              <!----></div></a> <span class="date">07-06</span></dt></dl> <dl><dd></dd> <dt><a href="/docs-vuepress-system/archives/" class="more">更多文章&gt;</a></dt></dl></div></div></main></div> <div class="footer"><!----> 
    Theme by
    <a href="https://github.com/xugaoyi/vuepress-theme-vdoing" target="_blank" title="本站主题">Vdoing</a> <!----></div> <div class="buttons"><div title="返回顶部" class="button blur go-to-top iconfont icon-fanhuidingbu" style="display:none;"></div> <div title="去评论" class="button blur go-to-comment iconfont icon-pinglun" style="display:none;"></div> <div title="主题模式" class="button blur theme-mode-but iconfont icon-zhuti"><ul class="select-box" style="display:none;"><li class="iconfont icon-zidong">
            跟随系统
          </li><li class="iconfont icon-rijianmoshi">
            浅色模式
          </li><li class="iconfont icon-yejianmoshi">
            深色模式
          </li><li class="iconfont icon-yuedu">
            阅读模式
          </li></ul></div></div> <!----> <!----> <!----></div><div class="global-ui"></div></div>
    <script src="/docs-vuepress-system/assets/js/app.4c359707.js" defer></script><script src="/docs-vuepress-system/assets/js/2.f426a6b2.js" defer></script><script src="/docs-vuepress-system/assets/js/103.f12529ea.js" defer></script>
  </body>
</html>
